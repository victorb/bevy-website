


  



  
  
  
    
    
  
    
    
  
    
    
      
      





  
    
  



  



  
    
  



<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta property="og:title" content="0.13 to 0.14" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://bevyengine.org&#x2F;&#x2F;learn&#x2F;migration-guides&#x2F;0-13-to-0-14&#x2F;" />
    <meta property="og:image"
          content="https://bevyengine.org/assets/bevy_logo_fill.png" />
    <meta property="og:description"
          content="Bevy is a refreshingly simple data-driven game engine built in Rust. It is free and open-source forever!" />
    <link rel="shortcut icon" type="image/png" href="/assets/favicon.png">
    <link rel="stylesheet" href="/site.css" />
    <link href="/atom.xml" rel="alternate" type="application/atom+xml" />
    

    <title>0.13 to 0.14</title>
    
  

  
    
    
  
    
    
  
    
    
  

  <script src="/optional-helpers.js"></script>
  <script defer src="/on-this-page.js"></script>

  </head>
  <body>
    <div class="layout">
      <input id="mobile-menu-state" class="hidden" type="checkbox">
      <header class="layout__header header print:hidden" data-mobile-menu-state-container>
        <div class="header__content">
          <label class="main-menu-backdrop" for="mobile-menu-state"></label>
          <label class="header__hamburger button-square button-square--header"
                  for="mobile-menu-state">
            <img src="/assets/icon-hamburger.svg"
                  alt="Three horizontal lines stacked on top of eachother"
                  width="20"
                  height="16">
          </label>
          <div class="header__left-block">
            <a class="header__logo" href="/">
              <img class="logo"
                    src="/assets/bevy_logo_dark.svg"
                    alt="Bevy Engine"
                    width="520"
                    height="130">
            </a>
            <div class="header__message">
              
  
    
      Migration Guides
    
  

            </div>
          </div>
          
  <input id="page-menu-switch-state" class="hidden" type="checkbox" checked>

          <nav class="header__menu main-menu main-menu--with-page-menu"
                role="navigation"
                data-page-menu-switch-state-container>
            <div class="main-menu__header">
              <a href="/">
                <img class="logo"
                      src="/assets/bevy_logo_dark.svg"
                      alt="Bevy Engine"
                      width="520"
                      height="130">
              </a>
              <label class="button-square button-square--header" for="mobile-menu-state">
                <img src="/assets/icon-times.svg"
                      alt="A saltire or x-cross"
                      width="16"
                      height="16">
              </label>
            </div>
            
  <div class="main-menu__page-menu-switch">
    <label class="menu-switch" for="page-menu-switch-state">
      <div class="menu-switch__option menu-switch__option--main-menu">Main Menu</div>
      <div class="menu-switch__option menu-switch__option--page-menu">
        
  
  
    
      Migration Guides
    
  


      </div>
    </label>
  </div>

            <div class="main-menu__content">
              <div class="main-menu__page-menu">
                
  
  <ul class="tree-menu">
    
    
    
    
    
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;introduction&#x2F;">Introduction</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
    
  
  
  <li class="tree-menu__item tree-menu__item--active">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-13-to-0-14&#x2F;">0.13 to 0.14</a>
      
        
<nav aria-label="On This Page" class="on-this-page tree-menu__toc">
  
  <ul>
  
    <li>
      <a href="#overhaul-color">Overhaul Color</a>
      
        <ul>
          
          <li>
            <a href="#color-space-representation">Color space representation</a>
          </li>
          
          <li>
            <a href="#color-methods">Color methods</a>
          </li>
          
          <li>
            <a href="#alpha">Alpha</a>
          </li>
          
          <li>
            <a href="#css-constants">CSS Constants</a>
          </li>
          
          <li>
            <a href="#switch-to-linearrgba">Switch to LinearRgba</a>
          </li>
          
        </ul>
      
    </li>
  
    <li>
      <a href="#make-default-behavior-for-backgroundcolor-and-bordercolor-more-intuitive">Make default behavior for BackgroundColor and BorderColor more intuitive</a>
      
    </li>
  
    <li>
      <a href="#register-missing-types-manually">Register missing types manually</a>
      
    </li>
  
    <li>
      <a href="#onenter-state-schedules-now-run-before-startup-schedules">OnEnter state schedules now run before Startup schedules</a>
      
    </li>
  
    <li>
      <a href="#fix-node2d-typo">Fix Node2d typo</a>
      
    </li>
  
    <li>
      <a href="#update-to-fixedbitset-0-5">Update to fixedbitset 0.5</a>
      
    </li>
  
    <li>
      <a href="#move-wasm-panic-handler-from-logplugin-to-panichandlerplugin">Move WASM panic handler from LogPlugin to PanicHandlerPlugin</a>
      
    </li>
  
    <li>
      <a href="#animationclip-now-uses-uuids-and-nooptypeidhash-is-now-noophash">AnimationClip now uses UUIDs and NoOpTypeIdHash is now NoOpHash</a>
      
    </li>
  
    <li>
      <a href="#implement-the-animationgraph-to-blend-animations-together">Implement the AnimationGraph to blend animations together</a>
      
    </li>
  
    <li>
      <a href="#multiplying-colors-by-f32-no-longer-ignores-alpha-channel">Multiplying colors by f32 no longer ignores alpha channel</a>
      
    </li>
  
    <li>
      <a href="#separate-subapp-from-app">Separate SubApp from App</a>
      
        <ul>
          
          <li>
            <a href="#constructing-a-subapp">Constructing a SubApp</a>
          </li>
          
          <li>
            <a href="#app-changes">App changes</a>
          </li>
          
          <li>
            <a href="#3rd-party-traits-on-app">3rd-party traits on App</a>
          </li>
          
        </ul>
      
    </li>
  
    <li>
      <a href="#make-appexit-more-specific-about-exit-reason">Make AppExit more specific about exit reason</a>
      
    </li>
  
    <li>
      <a href="#deprecate-dynamic-plugins">Deprecate dynamic plugins</a>
      
    </li>
  
    <li>
      <a href="#move-state-initialization-methods-to-bevy-state">Move state initialization methods to bevy::state</a>
      
    </li>
  
    <li>
      <a href="#remove-the-updateassets-and-assetevents-schedules">Remove the UpdateAssets and AssetEvents schedules</a>
      
    </li>
  
    <li>
      <a href="#use-async-fn-in-traits-rather-than-boxedfuture">Use async fn in traits rather than BoxedFuture</a>
      
    </li>
  
    <li>
      <a href="#add-ignore-variant-to-processresult">Add Ignore variant to ProcessResult</a>
      
    </li>
  
    <li>
      <a href="#removed-into-assetid-t-for-handle-t">Removed Into&lt;AssetId&lt;T&gt;&gt; for Handle&lt;T&gt;</a>
      
    </li>
  
    <li>
      <a href="#add-asyncseek-trait-to-reader-to-be-able-to-seek-inside-asset-loaders">Add AsyncSeek trait to Reader to be able to seek inside asset loaders</a>
      
    </li>
  
    <li>
      <a href="#add-error-info-to-loadstate-failed">Add error info to LoadState::Failed</a>
      
    </li>
  
    <li>
      <a href="#make-assetmetacheck-a-field-of-assetplugin">Make AssetMetaCheck a field of AssetPlugin</a>
      
    </li>
  
    <li>
      <a href="#make-loadcontext-use-the-builder-pattern">Make LoadContext use the builder pattern</a>
      
    </li>
  
    <li>
      <a href="#use-renderassetusages-to-configure-gltf-meshes-materials-during-load">Use RenderAssetUsages to configure gLTF meshes &amp; materials during load</a>
      
    </li>
  
    <li>
      <a href="#consolidate-rendermaterials-and-similar-into-renderassets-implement-renderasset-for-destination-type">Consolidate RenderMaterials and similar into RenderAssets, implement RenderAsset for destination type</a>
      
    </li>
  
    <li>
      <a href="#fix-leftover-references-to-children-when-despawning-audio-entities">Fix leftover references to children when despawning audio entities</a>
      
    </li>
  
    <li>
      <a href="#move-wgsl-math-constants-and-color-operations-from-bevy-pbr-to-bevy-render">Move WGSL math constants and color operations from bevy_pbr to bevy_render</a>
      
    </li>
  
    <li>
      <a href="#remove-old-color-space-utilities">Remove old color space utilities</a>
      
    </li>
  
    <li>
      <a href="#use-linearrgba-in-colorattachment">Use LinearRgba in ColorAttachment</a>
      
    </li>
  
    <li>
      <a href="#remove-close-on-esc">Remove close_on_esc</a>
      
    </li>
  
    <li>
      <a href="#make-sysinfo-diagnostic-plugin-optional">Make sysinfo diagnostic plugin optional</a>
      
    </li>
  
    <li>
      <a href="#improve-tracing-layer-customization">Improve tracing layer customization</a>
      
    </li>
  
    <li>
      <a href="#generalised-ecs-reactivity-with-observers">Generalised ECS reactivity with Observers</a>
      
    </li>
  
    <li>
      <a href="#immediately-apply-deferred-system-params-in-system-run">Immediately apply deferred system params in System::run</a>
      
    </li>
  
    <li>
      <a href="#move-command-and-commandqueue-into-bevy-ecs-world">Move Command and CommandQueue into bevy::ecs::world</a>
      
    </li>
  
    <li>
      <a href="#make-component-storage-a-constant">Make Component::Storage a constant</a>
      
    </li>
  
    <li>
      <a href="#don-t-store-access-archetypecomponentid-within-querystate">Don&#x27;t store Access&lt;ArchetypeComponentId&gt; within QueryState</a>
      
    </li>
  
    <li>
      <a href="#remove-worldcell">Remove WorldCell</a>
      
    </li>
  
    <li>
      <a href="#return-iterator-instead-of-slice-for-querystate-matched-tables-and-querystate-matches-archtypes">Return iterator instead of slice for QueryState::matched_tables and QueryState::matches_archtypes</a>
      
    </li>
  
    <li>
      <a href="#remove-system-stepping-from-default-features">Remove system stepping from default features</a>
      
    </li>
  
    <li>
      <a href="#optimize-event-updates-and-virtual-time">Optimize event updates and virtual time</a>
      
    </li>
  
    <li>
      <a href="#make-systemparam-new-archetype-and-querystate-new-archetype-unsafe">Make SystemParam::new_archetype and QueryState::new_archetype unsafe</a>
      
    </li>
  
    <li>
      <a href="#better-systemid-and-entity-conversion">Better SystemId and Entity conversion</a>
      
    </li>
  
    <li>
      <a href="#make-nextstate-an-enum">Make NextState an enum</a>
      
    </li>
  
    <li>
      <a href="#separate-states-from-core-ecs">Separate states from core ECS</a>
      
    </li>
  
    <li>
      <a href="#constrain-worldquery-get-state-to-only-accept-components">Constrain WorldQuery::get_state() to only accept Components</a>
      
    </li>
  
    <li>
      <a href="#unify-state-transition-names-to-exited-and-entered">Unify state transition names to exited and entered</a>
      
    </li>
  
    <li>
      <a href="#make-apply-state-transition-private">Make apply_state_transition private</a>
      
    </li>
  
    <li>
      <a href="#replace-fromworld-requirement-with-fromreflect-on-reflectresource">Replace FromWorld requirement with FromReflect on ReflectResource</a>
      
    </li>
  
    <li>
      <a href="#make-reflectcomponentfns-and-reflectbundlefns-methods-work-with-entitymut">Make ReflectComponentFns and ReflectBundleFns methods work with EntityMut</a>
      
    </li>
  
    <li>
      <a href="#require-typeregistry-in-reflectbundle-insert">Require TypeRegistry in ReflectBundle::insert()</a>
      
    </li>
  
    <li>
      <a href="#rename-multi-threaded-feature-to-multi-threaded">Rename multi-threaded feature to multi_threaded</a>
      
    </li>
  
    <li>
      <a href="#moves-intern-and-label-modules-from-bevy-utils-to-bevy-ecs">Moves intern and label modules from bevy::utils to bevy::ecs</a>
      
    </li>
  
    <li>
      <a href="#gizmo-line-joints">Gizmo line joints</a>
      
    </li>
  
    <li>
      <a href="#gizmo-line-styles">Gizmo line styles</a>
      
    </li>
  
    <li>
      <a href="#rename-segments-methods-to-resolution">Rename segments() methods to resolution()</a>
      
    </li>
  
    <li>
      <a href="#make-gizmos-take-primitives-as-a-reference">Make gizmos take primitives as a reference</a>
      
    </li>
  
    <li>
      <a href="#more-gizmos-builders">More gizmos builders</a>
      
    </li>
  
    <li>
      <a href="#rename-touchpad-input-to-gesture">Rename touchpad input to gesture</a>
      
    </li>
  
    <li>
      <a href="#deprecate-receivedcharacter">Deprecate ReceivedCharacter</a>
      
    </li>
  
    <li>
      <a href="#add-winitevent-keyboardfocuslost">Add WinitEvent::KeyboardFocusLost</a>
      
    </li>
  
    <li>
      <a href="#move-direction-types-out-of-bevy-math-primitives">Move direction types out of bevy::math::primitives</a>
      
    </li>
  
    <li>
      <a href="#rename-direction2d-3d-to-dir2-3">Rename Direction2d&#x2F;3d to Dir2&#x2F;3</a>
      
    </li>
  
    <li>
      <a href="#make-cardinal-splines-include-endpoints">Make cardinal splines include endpoints</a>
      
    </li>
  
    <li>
      <a href="#replace-point-with-vectorspace">Replace Point with VectorSpace</a>
      
    </li>
  
    <li>
      <a href="#uv-mapping-change-for-triangle2d">UV-mapping change for Triangle2d</a>
      
    </li>
  
    <li>
      <a href="#use-vec3a-for-3d-bounding-volumes-and-raycasts">Use Vec3A for 3D bounding volumes and raycasts</a>
      
    </li>
  
    <li>
      <a href="#update-glam-to-0-27">Update glam to 0.27</a>
      
    </li>
  
    <li>
      <a href="#common-meshbuilder-trait">Common MeshBuilder trait</a>
      
    </li>
  
    <li>
      <a href="#add-angle-range-to-torusmeshbuilder">Add angle range to TorusMeshBuilder</a>
      
    </li>
  
    <li>
      <a href="#add-subdivisions-to-planemeshbuilder">Add subdivisions to PlaneMeshBuilder</a>
      
    </li>
  
    <li>
      <a href="#make-transform-rotate-axis-and-transform-rotate-local-axis-use-dir3">Make Transform::rotate_axis and Transform::rotate_local_axis use Dir3</a>
      
    </li>
  
    <li>
      <a href="#use-dir3-for-local-axis-methods-in-globaltransform">Use Dir3 for local axis methods in GlobalTransform</a>
      
    </li>
  
    <li>
      <a href="#fix-ord-and-partialord-differing-for-floatord">Fix Ord and PartialOrd differing for FloatOrd</a>
      
    </li>
  
    <li>
      <a href="#move-floatord-into-bevy-math">Move FloatOrd into bevy::math</a>
      
    </li>
  
    <li>
      <a href="#change-reflectserialize-trait-bounds">Change ReflectSerialize trait bounds</a>
      
    </li>
  
    <li>
      <a href="#recursive-registration-of-types">Recursive registration of types</a>
      
    </li>
  
    <li>
      <a href="#rename-untypedreflectdeserializer-to-reflectdeserializer">Rename UntypedReflectDeserializer to ReflectDeserializer</a>
      
    </li>
  
    <li>
      <a href="#implement-reflect-for-result-as-an-enum">Implement Reflect for Result as an enum</a>
      
    </li>
  
    <li>
      <a href="#serialize-scene-with-typeregistry-and-rename-serialize-ron-to-serialize">Serialize scene with &amp;TypeRegistry and rename serialize_ron() to serialize()</a>
      
    </li>
  
    <li>
      <a href="#rename-camera3dbundle-dither-to-deband-dither">Rename Camera3dBundle::dither to deband_dither</a>
      
    </li>
  
    <li>
      <a href="#rename-affine-to-square-to-affine3-to-square">Rename affine_to_square() to affine3_to_square()</a>
      
    </li>
  
    <li>
      <a href="#move-alphamode-into-bevy-render">Move AlphaMode into bevy::render</a>
      
    </li>
  
    <li>
      <a href="#use-uvec2-when-working-with-texture-dimensions">Use UVec2 when working with texture dimensions</a>
      
    </li>
  
    <li>
      <a href="#fix-cameraprojectionplugin-not-implementing-plugin-in-some-cases">Fix CameraProjectionPlugin not implementing Plugin in some cases</a>
      
    </li>
  
    <li>
      <a href="#replace-random1d-with-rand-f-shader-function">Replace random1D() with rand_f() shader function</a>
      
    </li>
  
    <li>
      <a href="#intern-mesh-vertex-buffer-layouts">Intern mesh vertex buffer layouts</a>
      
    </li>
  
    <li>
      <a href="#make-gpuarraybufferindex-index-a-u32">Make GpuArrayBufferIndex::index a u32</a>
      
    </li>
  
    <li>
      <a href="#allow-disabling-shadows-through-materialplugin">Allow disabling shadows through MaterialPlugin</a>
      
    </li>
  
    <li>
      <a href="#remove-spritepipeline-colored">Remove SpritePipeline::COLORED</a>
      
    </li>
  
    <li>
      <a href="#sorted-and-binned-render-phase-items-resources-and-non-meshes">Sorted and binned render phase items, resources, and non-meshes</a>
      
    </li>
  
    <li>
      <a href="#gpu-frustum-culling">GPU frustum culling</a>
      
    </li>
  
    <li>
      <a href="#remove-deterministicrenderingconfig">Remove DeterministicRenderingConfig</a>
      
    </li>
  
    <li>
      <a href="#optimize-queue-material-meshes-and-remove-some-bit-manipulation">Optimize queue_material_meshes and remove some bit manipulation</a>
      
    </li>
  
    <li>
      <a href="#disable-ray-query-and-ray-tracing-acceleration-structure-by-default">Disable RAY_QUERY and RAY_TRACING_ACCELERATION_STRUCTURE by default</a>
      
    </li>
  
    <li>
      <a href="#upload-previous-frame-s-inverse-view-to-gpu">Upload previous frame&#x27;s inverse_view to GPU</a>
      
    </li>
  
    <li>
      <a href="#generate-meshuniforms-on-the-gpu-when-available">Generate MeshUniforms on the GPU when available.</a>
      
    </li>
  
    <li>
      <a href="#add-texture-coord-flipping-to-standardmaterial">Add texture coord flipping to StandardMaterial</a>
      
    </li>
  
    <li>
      <a href="#rename-shadowfilteringmethod-s-castano13-and-jimenez14-variants">Rename ShadowFilteringMethod&#x27;s Castano13 and Jimenez14 variants</a>
      
    </li>
  
    <li>
      <a href="#store-lists-of-visibleentities-separately">Store lists of VisibleEntities separately</a>
      
    </li>
  
    <li>
      <a href="#make-text-require-spritesource">Make Text require SpriteSource</a>
      
    </li>
  
    <li>
      <a href="#expose-desired-maximum-frame-latency">Expose desired_maximum_frame_latency</a>
      
    </li>
  
    <li>
      <a href="#merge-visibilitysystems-frusta-variants">Merge VisibilitySystems frusta variants</a>
      
    </li>
  
    <li>
      <a href="#expand-color-grading">Expand color grading</a>
      
    </li>
  
    <li>
      <a href="#rename-buffervec-to-rawbuffervec">Rename BufferVec to RawBufferVec</a>
      
    </li>
  
    <li>
      <a href="#implement-clearcoat">Implement clearcoat</a>
      
    </li>
  
    <li>
      <a href="#split-node2d-mainpass">Split Node2d::MainPass</a>
      
    </li>
  
    <li>
      <a href="#remove-limit-on-renderlayers">Remove limit on RenderLayers</a>
      
    </li>
  
    <li>
      <a href="#fix-astronomic-emissive-colors-required-for-bloom">Fix astronomic emissive colors required for bloom</a>
      
    </li>
  
    <li>
      <a href="#more-idiomatic-textureatlasbuilder">More idiomatic TextureAtlasBuilder</a>
      
    </li>
  
    <li>
      <a href="#normalise-matrix-naming">Normalise matrix naming</a>
      
    </li>
  
    <li>
      <a href="#rename-point-light-to-clusterable-object-in-cluster-contexts">Rename &quot;point light&quot; to &quot;clusterable object&quot; in cluster contexts</a>
      
    </li>
  
    <li>
      <a href="#make-mesh-merge-take-a-reference-of-mesh">Make Mesh::merge() take a reference of Mesh</a>
      
    </li>
  
    <li>
      <a href="#store-clearcolorconfig-instead-of-loadop-color-in-cameraoutputmode">Store ClearColorConfig instead of LoadOp&lt;Color&gt; in CameraOutputMode</a>
      
    </li>
  
    <li>
      <a href="#wgpu-0-20">wgpu 0.20</a>
      
    </li>
  
    <li>
      <a href="#deprecate-spritesheetbundle-and-atlasimagebundle">Deprecate SpriteSheetBundle and AtlasImageBundle</a>
      
    </li>
  
    <li>
      <a href="#decouple-backgroundcolor-from-uiimage">Decouple BackgroundColor from UiImage</a>
      
    </li>
  
    <li>
      <a href="#remove-generic-camera-from-extract-default-ui-camera-view-system">Remove generic camera from extract_default_ui_camera_view() system</a>
      
    </li>
  
    <li>
      <a href="#rename-need-new-surfaces-system-to-need-surface-configuration">Rename need_new_surfaces() system to need_surface_configuration()</a>
      
    </li>
  
    <li>
      <a href="#require-windowing-backends-to-store-windows-in-windowwrapper">Require windowing backends to store windows in WindowWrapper</a>
      
    </li>
  
    <li>
      <a href="#add-an-index-argument-to-parallel-iteration-helpers">Add an index argument to parallel iteration helpers</a>
      
    </li>
  
    <li>
      <a href="#fix-spawning-nodebundle-destroying-previous-ones">Fix spawning NodeBundle destroying previous ones</a>
      
    </li>
  
    <li>
      <a href="#rename-rect-inset-to-inflate">Rename Rect::inset() to inflate()</a>
      
    </li>
  
    <li>
      <a href="#updates-default-font-size-to-24px">Updates default font size to 24px</a>
      
    </li>
  
    <li>
      <a href="#disentangle-bevy-utils-bevy-core-s-re-exported-crates">Disentangle bevy::utils &#x2F; bevy::core&#x27;s re-exported crates</a>
      
    </li>
  
    <li>
      <a href="#re-add-window-fit-canvas-to-parent">Re-add Window::fit_canvas_to_parent</a>
      
    </li>
  
    <li>
      <a href="#remove-window-from-winitwindows-when-it-is-closed">Remove window from WinitWindows when it is closed</a>
      
    </li>
  
    <li>
      <a href="#make-window-close-the-frame-after-it-is-requested">Make window close the frame after it is requested</a>
      
    </li>
  
    <li>
      <a href="#upgrade-to-winit-0-30">Upgrade to winit 0.30</a>
      
    </li>
  
    <li>
      <a href="#separating-finite-and-infinite-3d-planes">Separating Finite and Infinite 3d Planes</a>
      
    </li>
  
    <li>
      <a href="#contextually-clearing-gizmos">Contextually clearing gizmos</a>
      
    </li>
  
  </ul>
</nav>

      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-12-to-0-13&#x2F;">0.12 to 0.13</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-11-to-0-12&#x2F;">0.11 to 0.12</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-10-to-0-11&#x2F;">0.10 to 0.11</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-9-to-0-10&#x2F;">0.9 to 0.10</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-8-to-0-9&#x2F;">0.8 to 0.9</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-7-to-0-8&#x2F;">0.7 to 0.8</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-6-to-0-7&#x2F;">0.6 to 0.7</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-5-to-0-6&#x2F;">0.5 to 0.6</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-4-to-0-5&#x2F;">0.4 to 0.5</a>
      
    </div>
  </li>

        
      
    
  </ul>


              </div>
              <ul class="main-menu__menu">
                
  
  
  
    
  
  
  
  
  
  <li class="main-menu__entry main-menu__entry--getting-started">
    <a href="&#x2F;learn&#x2F;quick-start&#x2F;getting-started" class="main-menu__link">
      <span>Getting Started</span>
    </a>
  </li>

                
  
  
  
    
  
  
  
  
  
    
  
  <li class="main-menu__entry ">
    <a href="&#x2F;learn" class="main-menu__link main-menu__link--active">
      <span>Learn</span>
    </a>
  </li>

                
  
  
  
    
  
  
  
  
  
  <li class="main-menu__entry ">
    <a href="&#x2F;news" class="main-menu__link">
      <span>News</span>
    </a>
  </li>

                
  
  
  
    
  
  
  
  
  
  <li class="main-menu__entry ">
    <a href="&#x2F;community" class="main-menu__link">
      <span>Community</span>
    </a>
  </li>

                
  
  
  
    
  
  
  
  
  
  <li class="main-menu__entry ">
    <a href="&#x2F;foundation" class="main-menu__link">
      <span>Foundation</span>
    </a>
  </li>

                
  
  
  
    
  
  
  
  
  
  <li class="main-menu__entry ">
    <a href="&#x2F;assets" class="main-menu__link">
      <span>Assets</span>
    </a>
  </li>

                
  
  
  
    
  
  
  
  
  
  <li class="main-menu__entry ">
    <a href="&#x2F;examples" class="main-menu__link">
      <span>Examples</span>
    </a>
  </li>

                
              </ul>
            </div>
          </nav>
          <div class="header__cta-container">
            <a class="button button--pink header__cta" href="/donate">Donate
              <img class="button__icon"
                    src="/assets/heart.svg"
                    alt="heart icon"
                    width="512"
                    height="512" />
            </a>
            <a class="header__cta header__cta--github"
                href="https://github.com/bevyengine/bevy">
              <img src="/assets/github-mark-white.svg"
                    alt="GitHub repo"
                    width="98"
                    height="96" />
            </a>
          </div>
        </div>
      </header>
      <main class="layout__content">
        <div class="container">
          
            
  
    
    
  
    
    
  
    
    
  

  

  

  

          
          
  <div class="page-with-menu ">
    <div class="page-with-menu__menu-wrapper print:hidden">
      <div class="page-with-menu__menu">
        
  
  <ul class="tree-menu">
    
    
    
    
    
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;introduction&#x2F;">Introduction</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
    
  
  
  <li class="tree-menu__item tree-menu__item--active">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-13-to-0-14&#x2F;">0.13 to 0.14</a>
      
        
<nav aria-label="On This Page" class="on-this-page tree-menu__toc">
  
  <ul>
  
    <li>
      <a href="#overhaul-color">Overhaul Color</a>
      
        <ul>
          
          <li>
            <a href="#color-space-representation">Color space representation</a>
          </li>
          
          <li>
            <a href="#color-methods">Color methods</a>
          </li>
          
          <li>
            <a href="#alpha">Alpha</a>
          </li>
          
          <li>
            <a href="#css-constants">CSS Constants</a>
          </li>
          
          <li>
            <a href="#switch-to-linearrgba">Switch to LinearRgba</a>
          </li>
          
        </ul>
      
    </li>
  
    <li>
      <a href="#make-default-behavior-for-backgroundcolor-and-bordercolor-more-intuitive">Make default behavior for BackgroundColor and BorderColor more intuitive</a>
      
    </li>
  
    <li>
      <a href="#register-missing-types-manually">Register missing types manually</a>
      
    </li>
  
    <li>
      <a href="#onenter-state-schedules-now-run-before-startup-schedules">OnEnter state schedules now run before Startup schedules</a>
      
    </li>
  
    <li>
      <a href="#fix-node2d-typo">Fix Node2d typo</a>
      
    </li>
  
    <li>
      <a href="#update-to-fixedbitset-0-5">Update to fixedbitset 0.5</a>
      
    </li>
  
    <li>
      <a href="#move-wasm-panic-handler-from-logplugin-to-panichandlerplugin">Move WASM panic handler from LogPlugin to PanicHandlerPlugin</a>
      
    </li>
  
    <li>
      <a href="#animationclip-now-uses-uuids-and-nooptypeidhash-is-now-noophash">AnimationClip now uses UUIDs and NoOpTypeIdHash is now NoOpHash</a>
      
    </li>
  
    <li>
      <a href="#implement-the-animationgraph-to-blend-animations-together">Implement the AnimationGraph to blend animations together</a>
      
    </li>
  
    <li>
      <a href="#multiplying-colors-by-f32-no-longer-ignores-alpha-channel">Multiplying colors by f32 no longer ignores alpha channel</a>
      
    </li>
  
    <li>
      <a href="#separate-subapp-from-app">Separate SubApp from App</a>
      
        <ul>
          
          <li>
            <a href="#constructing-a-subapp">Constructing a SubApp</a>
          </li>
          
          <li>
            <a href="#app-changes">App changes</a>
          </li>
          
          <li>
            <a href="#3rd-party-traits-on-app">3rd-party traits on App</a>
          </li>
          
        </ul>
      
    </li>
  
    <li>
      <a href="#make-appexit-more-specific-about-exit-reason">Make AppExit more specific about exit reason</a>
      
    </li>
  
    <li>
      <a href="#deprecate-dynamic-plugins">Deprecate dynamic plugins</a>
      
    </li>
  
    <li>
      <a href="#move-state-initialization-methods-to-bevy-state">Move state initialization methods to bevy::state</a>
      
    </li>
  
    <li>
      <a href="#remove-the-updateassets-and-assetevents-schedules">Remove the UpdateAssets and AssetEvents schedules</a>
      
    </li>
  
    <li>
      <a href="#use-async-fn-in-traits-rather-than-boxedfuture">Use async fn in traits rather than BoxedFuture</a>
      
    </li>
  
    <li>
      <a href="#add-ignore-variant-to-processresult">Add Ignore variant to ProcessResult</a>
      
    </li>
  
    <li>
      <a href="#removed-into-assetid-t-for-handle-t">Removed Into&lt;AssetId&lt;T&gt;&gt; for Handle&lt;T&gt;</a>
      
    </li>
  
    <li>
      <a href="#add-asyncseek-trait-to-reader-to-be-able-to-seek-inside-asset-loaders">Add AsyncSeek trait to Reader to be able to seek inside asset loaders</a>
      
    </li>
  
    <li>
      <a href="#add-error-info-to-loadstate-failed">Add error info to LoadState::Failed</a>
      
    </li>
  
    <li>
      <a href="#make-assetmetacheck-a-field-of-assetplugin">Make AssetMetaCheck a field of AssetPlugin</a>
      
    </li>
  
    <li>
      <a href="#make-loadcontext-use-the-builder-pattern">Make LoadContext use the builder pattern</a>
      
    </li>
  
    <li>
      <a href="#use-renderassetusages-to-configure-gltf-meshes-materials-during-load">Use RenderAssetUsages to configure gLTF meshes &amp; materials during load</a>
      
    </li>
  
    <li>
      <a href="#consolidate-rendermaterials-and-similar-into-renderassets-implement-renderasset-for-destination-type">Consolidate RenderMaterials and similar into RenderAssets, implement RenderAsset for destination type</a>
      
    </li>
  
    <li>
      <a href="#fix-leftover-references-to-children-when-despawning-audio-entities">Fix leftover references to children when despawning audio entities</a>
      
    </li>
  
    <li>
      <a href="#move-wgsl-math-constants-and-color-operations-from-bevy-pbr-to-bevy-render">Move WGSL math constants and color operations from bevy_pbr to bevy_render</a>
      
    </li>
  
    <li>
      <a href="#remove-old-color-space-utilities">Remove old color space utilities</a>
      
    </li>
  
    <li>
      <a href="#use-linearrgba-in-colorattachment">Use LinearRgba in ColorAttachment</a>
      
    </li>
  
    <li>
      <a href="#remove-close-on-esc">Remove close_on_esc</a>
      
    </li>
  
    <li>
      <a href="#make-sysinfo-diagnostic-plugin-optional">Make sysinfo diagnostic plugin optional</a>
      
    </li>
  
    <li>
      <a href="#improve-tracing-layer-customization">Improve tracing layer customization</a>
      
    </li>
  
    <li>
      <a href="#generalised-ecs-reactivity-with-observers">Generalised ECS reactivity with Observers</a>
      
    </li>
  
    <li>
      <a href="#immediately-apply-deferred-system-params-in-system-run">Immediately apply deferred system params in System::run</a>
      
    </li>
  
    <li>
      <a href="#move-command-and-commandqueue-into-bevy-ecs-world">Move Command and CommandQueue into bevy::ecs::world</a>
      
    </li>
  
    <li>
      <a href="#make-component-storage-a-constant">Make Component::Storage a constant</a>
      
    </li>
  
    <li>
      <a href="#don-t-store-access-archetypecomponentid-within-querystate">Don&#x27;t store Access&lt;ArchetypeComponentId&gt; within QueryState</a>
      
    </li>
  
    <li>
      <a href="#remove-worldcell">Remove WorldCell</a>
      
    </li>
  
    <li>
      <a href="#return-iterator-instead-of-slice-for-querystate-matched-tables-and-querystate-matches-archtypes">Return iterator instead of slice for QueryState::matched_tables and QueryState::matches_archtypes</a>
      
    </li>
  
    <li>
      <a href="#remove-system-stepping-from-default-features">Remove system stepping from default features</a>
      
    </li>
  
    <li>
      <a href="#optimize-event-updates-and-virtual-time">Optimize event updates and virtual time</a>
      
    </li>
  
    <li>
      <a href="#make-systemparam-new-archetype-and-querystate-new-archetype-unsafe">Make SystemParam::new_archetype and QueryState::new_archetype unsafe</a>
      
    </li>
  
    <li>
      <a href="#better-systemid-and-entity-conversion">Better SystemId and Entity conversion</a>
      
    </li>
  
    <li>
      <a href="#make-nextstate-an-enum">Make NextState an enum</a>
      
    </li>
  
    <li>
      <a href="#separate-states-from-core-ecs">Separate states from core ECS</a>
      
    </li>
  
    <li>
      <a href="#constrain-worldquery-get-state-to-only-accept-components">Constrain WorldQuery::get_state() to only accept Components</a>
      
    </li>
  
    <li>
      <a href="#unify-state-transition-names-to-exited-and-entered">Unify state transition names to exited and entered</a>
      
    </li>
  
    <li>
      <a href="#make-apply-state-transition-private">Make apply_state_transition private</a>
      
    </li>
  
    <li>
      <a href="#replace-fromworld-requirement-with-fromreflect-on-reflectresource">Replace FromWorld requirement with FromReflect on ReflectResource</a>
      
    </li>
  
    <li>
      <a href="#make-reflectcomponentfns-and-reflectbundlefns-methods-work-with-entitymut">Make ReflectComponentFns and ReflectBundleFns methods work with EntityMut</a>
      
    </li>
  
    <li>
      <a href="#require-typeregistry-in-reflectbundle-insert">Require TypeRegistry in ReflectBundle::insert()</a>
      
    </li>
  
    <li>
      <a href="#rename-multi-threaded-feature-to-multi-threaded">Rename multi-threaded feature to multi_threaded</a>
      
    </li>
  
    <li>
      <a href="#moves-intern-and-label-modules-from-bevy-utils-to-bevy-ecs">Moves intern and label modules from bevy::utils to bevy::ecs</a>
      
    </li>
  
    <li>
      <a href="#gizmo-line-joints">Gizmo line joints</a>
      
    </li>
  
    <li>
      <a href="#gizmo-line-styles">Gizmo line styles</a>
      
    </li>
  
    <li>
      <a href="#rename-segments-methods-to-resolution">Rename segments() methods to resolution()</a>
      
    </li>
  
    <li>
      <a href="#make-gizmos-take-primitives-as-a-reference">Make gizmos take primitives as a reference</a>
      
    </li>
  
    <li>
      <a href="#more-gizmos-builders">More gizmos builders</a>
      
    </li>
  
    <li>
      <a href="#rename-touchpad-input-to-gesture">Rename touchpad input to gesture</a>
      
    </li>
  
    <li>
      <a href="#deprecate-receivedcharacter">Deprecate ReceivedCharacter</a>
      
    </li>
  
    <li>
      <a href="#add-winitevent-keyboardfocuslost">Add WinitEvent::KeyboardFocusLost</a>
      
    </li>
  
    <li>
      <a href="#move-direction-types-out-of-bevy-math-primitives">Move direction types out of bevy::math::primitives</a>
      
    </li>
  
    <li>
      <a href="#rename-direction2d-3d-to-dir2-3">Rename Direction2d&#x2F;3d to Dir2&#x2F;3</a>
      
    </li>
  
    <li>
      <a href="#make-cardinal-splines-include-endpoints">Make cardinal splines include endpoints</a>
      
    </li>
  
    <li>
      <a href="#replace-point-with-vectorspace">Replace Point with VectorSpace</a>
      
    </li>
  
    <li>
      <a href="#uv-mapping-change-for-triangle2d">UV-mapping change for Triangle2d</a>
      
    </li>
  
    <li>
      <a href="#use-vec3a-for-3d-bounding-volumes-and-raycasts">Use Vec3A for 3D bounding volumes and raycasts</a>
      
    </li>
  
    <li>
      <a href="#update-glam-to-0-27">Update glam to 0.27</a>
      
    </li>
  
    <li>
      <a href="#common-meshbuilder-trait">Common MeshBuilder trait</a>
      
    </li>
  
    <li>
      <a href="#add-angle-range-to-torusmeshbuilder">Add angle range to TorusMeshBuilder</a>
      
    </li>
  
    <li>
      <a href="#add-subdivisions-to-planemeshbuilder">Add subdivisions to PlaneMeshBuilder</a>
      
    </li>
  
    <li>
      <a href="#make-transform-rotate-axis-and-transform-rotate-local-axis-use-dir3">Make Transform::rotate_axis and Transform::rotate_local_axis use Dir3</a>
      
    </li>
  
    <li>
      <a href="#use-dir3-for-local-axis-methods-in-globaltransform">Use Dir3 for local axis methods in GlobalTransform</a>
      
    </li>
  
    <li>
      <a href="#fix-ord-and-partialord-differing-for-floatord">Fix Ord and PartialOrd differing for FloatOrd</a>
      
    </li>
  
    <li>
      <a href="#move-floatord-into-bevy-math">Move FloatOrd into bevy::math</a>
      
    </li>
  
    <li>
      <a href="#change-reflectserialize-trait-bounds">Change ReflectSerialize trait bounds</a>
      
    </li>
  
    <li>
      <a href="#recursive-registration-of-types">Recursive registration of types</a>
      
    </li>
  
    <li>
      <a href="#rename-untypedreflectdeserializer-to-reflectdeserializer">Rename UntypedReflectDeserializer to ReflectDeserializer</a>
      
    </li>
  
    <li>
      <a href="#implement-reflect-for-result-as-an-enum">Implement Reflect for Result as an enum</a>
      
    </li>
  
    <li>
      <a href="#serialize-scene-with-typeregistry-and-rename-serialize-ron-to-serialize">Serialize scene with &amp;TypeRegistry and rename serialize_ron() to serialize()</a>
      
    </li>
  
    <li>
      <a href="#rename-camera3dbundle-dither-to-deband-dither">Rename Camera3dBundle::dither to deband_dither</a>
      
    </li>
  
    <li>
      <a href="#rename-affine-to-square-to-affine3-to-square">Rename affine_to_square() to affine3_to_square()</a>
      
    </li>
  
    <li>
      <a href="#move-alphamode-into-bevy-render">Move AlphaMode into bevy::render</a>
      
    </li>
  
    <li>
      <a href="#use-uvec2-when-working-with-texture-dimensions">Use UVec2 when working with texture dimensions</a>
      
    </li>
  
    <li>
      <a href="#fix-cameraprojectionplugin-not-implementing-plugin-in-some-cases">Fix CameraProjectionPlugin not implementing Plugin in some cases</a>
      
    </li>
  
    <li>
      <a href="#replace-random1d-with-rand-f-shader-function">Replace random1D() with rand_f() shader function</a>
      
    </li>
  
    <li>
      <a href="#intern-mesh-vertex-buffer-layouts">Intern mesh vertex buffer layouts</a>
      
    </li>
  
    <li>
      <a href="#make-gpuarraybufferindex-index-a-u32">Make GpuArrayBufferIndex::index a u32</a>
      
    </li>
  
    <li>
      <a href="#allow-disabling-shadows-through-materialplugin">Allow disabling shadows through MaterialPlugin</a>
      
    </li>
  
    <li>
      <a href="#remove-spritepipeline-colored">Remove SpritePipeline::COLORED</a>
      
    </li>
  
    <li>
      <a href="#sorted-and-binned-render-phase-items-resources-and-non-meshes">Sorted and binned render phase items, resources, and non-meshes</a>
      
    </li>
  
    <li>
      <a href="#gpu-frustum-culling">GPU frustum culling</a>
      
    </li>
  
    <li>
      <a href="#remove-deterministicrenderingconfig">Remove DeterministicRenderingConfig</a>
      
    </li>
  
    <li>
      <a href="#optimize-queue-material-meshes-and-remove-some-bit-manipulation">Optimize queue_material_meshes and remove some bit manipulation</a>
      
    </li>
  
    <li>
      <a href="#disable-ray-query-and-ray-tracing-acceleration-structure-by-default">Disable RAY_QUERY and RAY_TRACING_ACCELERATION_STRUCTURE by default</a>
      
    </li>
  
    <li>
      <a href="#upload-previous-frame-s-inverse-view-to-gpu">Upload previous frame&#x27;s inverse_view to GPU</a>
      
    </li>
  
    <li>
      <a href="#generate-meshuniforms-on-the-gpu-when-available">Generate MeshUniforms on the GPU when available.</a>
      
    </li>
  
    <li>
      <a href="#add-texture-coord-flipping-to-standardmaterial">Add texture coord flipping to StandardMaterial</a>
      
    </li>
  
    <li>
      <a href="#rename-shadowfilteringmethod-s-castano13-and-jimenez14-variants">Rename ShadowFilteringMethod&#x27;s Castano13 and Jimenez14 variants</a>
      
    </li>
  
    <li>
      <a href="#store-lists-of-visibleentities-separately">Store lists of VisibleEntities separately</a>
      
    </li>
  
    <li>
      <a href="#make-text-require-spritesource">Make Text require SpriteSource</a>
      
    </li>
  
    <li>
      <a href="#expose-desired-maximum-frame-latency">Expose desired_maximum_frame_latency</a>
      
    </li>
  
    <li>
      <a href="#merge-visibilitysystems-frusta-variants">Merge VisibilitySystems frusta variants</a>
      
    </li>
  
    <li>
      <a href="#expand-color-grading">Expand color grading</a>
      
    </li>
  
    <li>
      <a href="#rename-buffervec-to-rawbuffervec">Rename BufferVec to RawBufferVec</a>
      
    </li>
  
    <li>
      <a href="#implement-clearcoat">Implement clearcoat</a>
      
    </li>
  
    <li>
      <a href="#split-node2d-mainpass">Split Node2d::MainPass</a>
      
    </li>
  
    <li>
      <a href="#remove-limit-on-renderlayers">Remove limit on RenderLayers</a>
      
    </li>
  
    <li>
      <a href="#fix-astronomic-emissive-colors-required-for-bloom">Fix astronomic emissive colors required for bloom</a>
      
    </li>
  
    <li>
      <a href="#more-idiomatic-textureatlasbuilder">More idiomatic TextureAtlasBuilder</a>
      
    </li>
  
    <li>
      <a href="#normalise-matrix-naming">Normalise matrix naming</a>
      
    </li>
  
    <li>
      <a href="#rename-point-light-to-clusterable-object-in-cluster-contexts">Rename &quot;point light&quot; to &quot;clusterable object&quot; in cluster contexts</a>
      
    </li>
  
    <li>
      <a href="#make-mesh-merge-take-a-reference-of-mesh">Make Mesh::merge() take a reference of Mesh</a>
      
    </li>
  
    <li>
      <a href="#store-clearcolorconfig-instead-of-loadop-color-in-cameraoutputmode">Store ClearColorConfig instead of LoadOp&lt;Color&gt; in CameraOutputMode</a>
      
    </li>
  
    <li>
      <a href="#wgpu-0-20">wgpu 0.20</a>
      
    </li>
  
    <li>
      <a href="#deprecate-spritesheetbundle-and-atlasimagebundle">Deprecate SpriteSheetBundle and AtlasImageBundle</a>
      
    </li>
  
    <li>
      <a href="#decouple-backgroundcolor-from-uiimage">Decouple BackgroundColor from UiImage</a>
      
    </li>
  
    <li>
      <a href="#remove-generic-camera-from-extract-default-ui-camera-view-system">Remove generic camera from extract_default_ui_camera_view() system</a>
      
    </li>
  
    <li>
      <a href="#rename-need-new-surfaces-system-to-need-surface-configuration">Rename need_new_surfaces() system to need_surface_configuration()</a>
      
    </li>
  
    <li>
      <a href="#require-windowing-backends-to-store-windows-in-windowwrapper">Require windowing backends to store windows in WindowWrapper</a>
      
    </li>
  
    <li>
      <a href="#add-an-index-argument-to-parallel-iteration-helpers">Add an index argument to parallel iteration helpers</a>
      
    </li>
  
    <li>
      <a href="#fix-spawning-nodebundle-destroying-previous-ones">Fix spawning NodeBundle destroying previous ones</a>
      
    </li>
  
    <li>
      <a href="#rename-rect-inset-to-inflate">Rename Rect::inset() to inflate()</a>
      
    </li>
  
    <li>
      <a href="#updates-default-font-size-to-24px">Updates default font size to 24px</a>
      
    </li>
  
    <li>
      <a href="#disentangle-bevy-utils-bevy-core-s-re-exported-crates">Disentangle bevy::utils &#x2F; bevy::core&#x27;s re-exported crates</a>
      
    </li>
  
    <li>
      <a href="#re-add-window-fit-canvas-to-parent">Re-add Window::fit_canvas_to_parent</a>
      
    </li>
  
    <li>
      <a href="#remove-window-from-winitwindows-when-it-is-closed">Remove window from WinitWindows when it is closed</a>
      
    </li>
  
    <li>
      <a href="#make-window-close-the-frame-after-it-is-requested">Make window close the frame after it is requested</a>
      
    </li>
  
    <li>
      <a href="#upgrade-to-winit-0-30">Upgrade to winit 0.30</a>
      
    </li>
  
    <li>
      <a href="#separating-finite-and-infinite-3d-planes">Separating Finite and Infinite 3d Planes</a>
      
    </li>
  
    <li>
      <a href="#contextually-clearing-gizmos">Contextually clearing gizmos</a>
      
    </li>
  
  </ul>
</nav>

      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-12-to-0-13&#x2F;">0.12 to 0.13</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-11-to-0-12&#x2F;">0.11 to 0.12</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-10-to-0-11&#x2F;">0.10 to 0.11</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-9-to-0-10&#x2F;">0.9 to 0.10</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-8-to-0-9&#x2F;">0.8 to 0.9</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-7-to-0-8&#x2F;">0.7 to 0.8</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-6-to-0-7&#x2F;">0.6 to 0.7</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-5-to-0-6&#x2F;">0.5 to 0.6</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-4-to-0-5&#x2F;">0.4 to 0.5</a>
      
    </div>
  </li>

        
      
    
  </ul>


      </div>
    </div>
    <div class="page-with-menu__content">
      
  <div class="docs-page">
    <div class="docs-content">
      

      
      
      
      
      
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      

      
        
      

      
      
      
      
      
        
        
        
        
        
        
      
        
        
        
        
          
          
        
        
        
          
          
          
      <h1>
        Migration Guide: 0.13 to 0.14
        
      </h1>
      <div class="media-content">
        <aside class="callout callout--warning">
  <p>Bevy relies heavily on improvements in the Rust language and compiler. As a result, the Minimum Supported Rust Version (MSRV) is "the latest stable release" of Rust.</p>
</aside>
<div class="migration-guide">
<h3 id="overhaul-color"><a href="https://github.com/bevyengine/bevy/pull/12163">Overhaul <code>Color</code></a>
<a class="anchor-link" href="#overhaul-color">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Color</div>
<div class="migration-guide-area-tag">Gizmos</div>
<div class="migration-guide-area-tag">Rendering</div>
<div class="migration-guide-area-tag">Text</div>
<div class="migration-guide-area-tag">UI</div>
</div>
<p>Bevy's color support has received a major overhaul, and with it the new <code>bevy::color</code> module. Buckle up, many things have been changed!</p>
<h4 id="color-space-representation">Color space representation
<a class="anchor-link" href="#color-space-representation">#</a>
</h4>
<p>Bevy's main <code>Color</code> enum is used to represent color in many different color spaces (such as RGB, HSL, and more). Before, these color spaces were all represented inline as variants:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-storage z-type z-enum z-rust">enum</span> <span class="z-entity z-name z-enum z-rust">Color</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    Rgba <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        red<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        green<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        blue<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        alpha<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    Hsla <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        hue<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        saturation<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        lightness<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        alpha<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>This has been changed so now each color space has its own dedicated struct:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Srgba</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">red</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">f32</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">green</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">f32</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">blue</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">f32</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">alpha</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">f32</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Hsla</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">hue</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">f32</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">saturation</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">f32</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">lightness</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">f32</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">alpha</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">f32</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-storage z-type z-enum z-rust">enum</span> <span class="z-entity z-name z-enum z-rust">Color</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    Srgba<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Srgba</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    Hsla<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Hsla</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>This makes it easier to organize and manage different color spaces, and many more color spaces have been added too! To handle this change, you may need to update your match statements:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">match</span> color <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span>Rgba <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> red<span class="z-punctuation z-separator z-rust">,</span> green<span class="z-punctuation z-separator z-rust">,</span> blue<span class="z-punctuation z-separator z-rust">,</span> alpha </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span> <span class="z-keyword z-operator z-rust">=&gt;</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Something cool here!
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-rust">_</span> <span class="z-keyword z-operator z-rust">=&gt;</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">match</span> color <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span>Srgba<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Srgba <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> red<span class="z-punctuation z-separator z-rust">,</span> green<span class="z-punctuation z-separator z-rust">,</span> blue<span class="z-punctuation z-separator z-rust">,</span> alpha </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">=&gt;</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Something cool here!
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> If you explicitly match every possible color space, you may need to handle more variants.
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Color::Xyza(Xyza { x, y, z, alpha }) =&gt; {
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span>     // Something else even cooler here!
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> },
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-rust">_</span> <span class="z-keyword z-operator z-rust">=&gt;</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre>
<p>Additionally, you must now use the <code>From</code> and <code>Into</code> implementations when converting between color spaces, as compared to the old helper methods such as <code>as_rgba</code> and <code>as_hsla</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span>rgb<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">as_hsla</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color<span class="z-punctuation z-separator z-rust">:</span> Hsla <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Srgba<span class="z-punctuation z-accessor z-rust">::</span></span>rgb<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h4 id="color-methods"><code>Color</code> methods
<a class="anchor-link" href="#color-methods">#</a>
</h4>
<p>Any mention of RGB has been renamed to <a href="https://en.wikipedia.org/wiki/SRGB">sRGB</a>. This includes the variant <code>Color::Rgba</code> turning into <code>Color::Srgba</code> as well as methods such as <code>Color::rgb</code> and <code>Color::rgb_u8</code> turning into <code>Color::srgb</code> and <code>Color::srgb_u8</code>.</p>
<p>Methods to access specific channels of <code>Color</code> have been removed due to causing silent, relatively expensive conversions. This includes <code>Color::r</code>, <code>Color::set_r</code>, <code>Color::with_r</code>, and all of the equivalents for <code>g</code>, <code>b</code> <code>h</code>, <code>s</code> and <code>l</code>. Convert your <code>Color</code> into the desired color space, perform your operation there, and then convert it back.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> color <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span>rgb<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">color<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">set_b</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span>srgb<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> srgba <span class="z-keyword z-operator z-assignment z-rust">=</span> Srgba <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    blue<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-meta z-path z-rust">Srgba<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>color</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>srgba</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p><code>Color::hex</code> has been moved to <code>Srgba::hex</code>. Call <code>.into()</code> or construct a <code>Color::Srgba</code> variant manually to convert it.</p>
<p><code>Color::rgb_linear</code> and <code>Color::rgba_linear</code> have been renamed <code>Color::linear_rgb</code> and <code>Color::linear_rgba</code> to fit the naming scheme of the <code>LinearRgba</code> struct.</p>
<p><code>Color::as_linear_rgba_f32</code> and <code>Color::as_linear_rgba_u32</code> have been removed. Call <code>LinearRgba::to_f32_array</code> and <code>LinearRgba::to_u32</code> instead, converting if necessary.</p>
<p>Several other color conversion methods to transform LCH or HSL colors into float arrays or <code>Vec</code> types have been removed. Please reimplement these externally or open a PR to re-add them if you found them particularly useful.</p>
<p>Vector field arithmetic operations on <code>Color</code> (add, subtract, multiply and divide by a f32) have been removed. Instead, convert your colors into <code>LinearRgba</code> space and perform your operations explicitly there. This is particularly relevant when working with emissive or HDR colors, whose color channel values are routinely outside of the ordinary 0 to 1 range.</p>
<h4 id="alpha">Alpha
<a class="anchor-link" href="#alpha">#</a>
</h4>
<p>Alpha, also known as transparency, used to be referred to by the letter <code>a</code>. It is now called by its full name within structs and methods.</p>
<ul>
<li><code>Color::set_a</code>, <code>Color::with_a</code>, and <code>Color::a</code> are now <code>Color::set_alpha</code>, <code>Color::with_alpha</code>, and <code>Color::alpha</code>. These are part of the new <code>Alpha</code> trait.</li>
<li>Additionally, <code>Color::is_fully_transparent</code> is now part of the <code>Alpha</code>.</li>
</ul>
<h4 id="css-constants">CSS Constants
<a class="anchor-link" href="#css-constants">#</a>
</h4>
<p>The various CSS color constants are no longer stored directly on <code>Color</code>. Instead, they’re defined in the <code>Srgba</code> color space, and accessed via <code>bevy::color::palettes</code>. Call <code>.into()</code> on them to convert them into a <code>Color</code> for quick debugging use.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">BLUE</span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">color<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">palettes<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">css<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">BLUE</span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-other z-rust">BLUE</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p>Please note that <code>palettes::css</code> is not necessarily 1:1 with the constants defined previously as some names and colors have been changed to conform with the CSS spec. If you need the same color as before, consult the table below or use the color values from the <a href="https://github.com/bevyengine/bevy/blob/v0.13.2/crates/bevy_render/src/color/mod.rs#L60">old constants</a>.</p>
<table><thead><tr><th>0.13</th><th>0.14</th></tr></thead><tbody>
<tr><td><code>CYAN</code></td><td><code>AQUA</code></td></tr>
<tr><td><code>DARK_GRAY</code></td><td><code>Srgba::gray(0.25)</code></td></tr>
<tr><td><code>DARK_GREEN</code></td><td><code>Srgba::rgb(0.0, 0.5, 0.0)</code></td></tr>
<tr><td><code>GREEN</code></td><td><code>LIME</code></td></tr>
<tr><td><code>LIME_GREEN</code></td><td><code>LIMEGREEN</code></td></tr>
<tr><td><code>PINK</code></td><td><code>DEEP_PINK</code></td></tr>
</tbody></table>
<h4 id="switch-to-linearrgba">Switch to <code>LinearRgba</code>
<a class="anchor-link" href="#switch-to-linearrgba">#</a>
</h4>
<p><code>WireframeMaterial</code>, <code>ExtractedUiNode</code>, <code>ExtractedDirectionalLight</code>, <code>ExtractedPointLight</code>, <code>ExtractedSpotLight</code>, and <code>ExtractedSprite</code> now store a <code>LinearRgba</code> rather than a polymorphic <code>Color</code>. Furthermore, <code>Color</code> no longer implements <code>AsBindGroup</code>. You should store a <code>LinearRgba</code> instead to avoid conversion costs.</p>
<h3 id="make-default-behavior-for-backgroundcolor-and-bordercolor-more-intuitive"><a href="https://github.com/bevyengine/bevy/pull/14017">Make default behavior for <code>BackgroundColor</code> and <code>BorderColor</code> more intuitive</a>
<a class="anchor-link" href="#make-default-behavior-for-backgroundcolor-and-bordercolor-more-intuitive">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
<div class="migration-guide-area-tag">UI</div>
</div>
<p><code>BackgroundColor</code> no longer tints the color of images in <code>ImageBundle</code> or <code>ButtonBundle</code>. Set <code>UiImage::color</code> to tint images instead. Furthermore, the new default texture for <code>UiImage</code> is now a transparent white square.  Use <code>UiImage::solid_color</code> to quickly draw debug images. Finally, the default value for <code>BackgroundColor</code> and <code>BorderColor</code> is now transparent. Set the color to white manually to return to previous behavior.</p>
<h3 id="register-missing-types-manually"><a href="https://github.com/bevyengine/bevy/pull/12314">Register missing types manually</a>
<a class="anchor-link" href="#register-missing-types-manually">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Reflection</div>
</div>
<p>Many external types are no longer registered into the type registry by Bevy's default plugin. Generally, only types used by other Bevy types (due to the new recursive registration) will be registered by default. If you were using reflection features with types from <code>std</code> or <code>glam</code> you may need to manually register them.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">register_type<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>DMat3<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="onenter-state-schedules-now-run-before-startup-schedules"><a href="https://github.com/bevyengine/bevy/pull/11426"><code>OnEnter</code> state schedules now run before Startup schedules</a>
<a class="anchor-link" href="#onenter-state-schedules-now-run-before-startup-schedules">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">App</div>
<div class="migration-guide-area-tag">ECS</div>
</div>
<p>In Bevy 0.13, the [<code>OnEnter</code>] schedules for states initialized via [<code>app.init_state</code>] would run after any systems in the <code>Startup</code> schedules.
This is because [<code>apply_state_transitions</code>] was only run during the [<code>StateTransition</code>] schedule.</p>
<p>This was a subtle bug: it was possible for the game to be in a particular state without having first <em>entered</em> it.
Now, [<code>OnEnter</code>] state transition logic is handled immediately.
See <a href="https://github.com/bevyengine/bevy/issues/13968">bevy#13968</a> for more context on this decision.</p>
<p>To migrate, choose one of the following options:</p>
<ol>
<li>Moving your startup systems to a state, as a variant of the state you're waiting for (e.g. <code>AppState::Setup</code>), and then transition out of it once the setup is complete.</li>
<li>Moving your startup systems to a state, and making the other state a <a href="https://github.com/bevyengine/bevy/blob/v0.14.0-rc.4/examples/state/sub_states.rs">sub state</a> that depends on the startup state's completion (e.g. <code>SetupState::SetupComplete</code>).</li>
</ol>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">States<span class="z-punctuation z-separator z-rust">,</span> Default</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-storage z-type z-enum z-rust">enum</span> <span class="z-entity z-name z-enum z-rust">AppState</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">default</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    InMenu<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    InGame<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust">app
</span><span class="z-source z-rust">   <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">init_state<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>AppState<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">   <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Startup<span class="z-punctuation z-separator z-rust">,</span> initial_setup</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">   <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>OnEnter<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">AppState<span class="z-punctuation z-accessor z-rust">::</span></span>InMenu</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> relies_on_initial_setup</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14 (Solution 1)
</span></span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">States<span class="z-punctuation z-separator z-rust">,</span> Default</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-storage z-type z-enum z-rust">enum</span> <span class="z-entity z-name z-enum z-rust">AppState</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Make this the default instead of `InMenu`.
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">default</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    Setup
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    InMenu<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    InGame<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">transition_to_in_menu</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">app_state</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">ResMut<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-meta z-generic z-rust">NextState<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>AppState<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    app_state<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">set</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">AppState<span class="z-punctuation z-accessor z-rust">::</span></span>InMenu</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust">app
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">init_state<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>AppState<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>OnEnter<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">AppState<span class="z-punctuation z-accessor z-rust">::</span></span>Setup</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> initial_setup</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Update<span class="z-punctuation z-separator z-rust">,</span> transition_to_in_menu<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run_if</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-support z-function z-rust">in_state</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">AppState<span class="z-punctuation z-accessor z-rust">::</span></span>Setup</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>OnEnter<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">AppState<span class="z-punctuation z-accessor z-rust">::</span></span>InMenu</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> relies_on_initial_setup</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14 (Solution 2)
</span></span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">States<span class="z-punctuation z-separator z-rust">,</span> Default</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-storage z-type z-enum z-rust">enum</span> <span class="z-entity z-name z-enum z-rust">SetupState</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">default</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    SettingUp<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    SetupComplete<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">SubStates<span class="z-punctuation z-separator z-rust">,</span> Default</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">source</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">SetupState <span class="z-keyword z-operator z-rust">=</span> SetupState::SetupComplete</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-storage z-type z-enum z-rust">enum</span> <span class="z-entity z-name z-enum z-rust">AppState</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">default</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    InMenu<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    InGame<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">finish_setup</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">app_state</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">ResMut<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-meta z-generic z-rust">NextState<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>SetupState<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    app_state<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">set</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">SetupState<span class="z-punctuation z-accessor z-rust">::</span></span>SetupComplete</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust">app
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">init_state<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>SetupState<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Note that we don&#39;t call `init_state()` for substates!
</span></span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">add_sub_state<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>AppState<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>OnEnter<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">AppState<span class="z-punctuation z-accessor z-rust">::</span></span>InitialSetup</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> initial_setup</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Update<span class="z-punctuation z-separator z-rust">,</span> finish_setup<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run_if</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-support z-function z-rust">in_state</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">AppState<span class="z-punctuation z-accessor z-rust">::</span></span>Setup</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>OnEnter<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">AppState<span class="z-punctuation z-accessor z-rust">::</span></span>InMenu</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> relies_on_initial_setup</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="fix-node2d-typo"><a href="https://github.com/bevyengine/bevy/pull/12038">Fix <code>Node2d</code> typo</a>
<a class="anchor-link" href="#fix-node2d-typo">#</a>
</h3>
<div class="migration-guide-area-tags">
</div>
<p><code>Node2d::ConstrastAdaptiveSharpening</code> from <code>bevy::core_pipeline::core_2d::graph</code> has been renamed to fix a typo. It was originally <code>Constrast</code>, but is now <code>Contrast</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">Node2D<span class="z-punctuation z-accessor z-rust">::</span></span>ConstrastAdaptiveSharpening
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">Node2D<span class="z-punctuation z-accessor z-rust">::</span></span>ContrastAdaptiveSharpening
</span></code></pre>
<h3 id="update-to-fixedbitset-0-5"><a href="https://github.com/bevyengine/bevy/pull/12512">Update to <code>fixedbitset</code> 0.5</a>
<a class="anchor-link" href="#update-to-fixedbitset-0-5">#</a>
</h3>
<div class="migration-guide-area-tags">
</div>
<p><code>Access::grow</code> from <code>bevy::ecs::query</code> has been removed. Many operations now automatically grow the capacity.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> access <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Access<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">access<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">grow</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">1</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Other operations...
</span></span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> access <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Access<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Other operations...
</span></span></code></pre>
<h3 id="move-wasm-panic-handler-from-logplugin-to-panichandlerplugin"><a href="https://github.com/bevyengine/bevy/pull/12557">Move WASM panic handler from <code>LogPlugin</code> to <code>PanicHandlerPlugin</code></a>
<a class="anchor-link" href="#move-wasm-panic-handler-from-logplugin-to-panichandlerplugin">#</a>
</h3>
<div class="migration-guide-area-tags">
</div>
<p><code>LogPlugin</code> used to silently override the panic handler on WASM targets. This functionality has now been split out into the new <code>PanicHandlerPlugin</code>, which was added to <code>DefaultPlugins</code>.</p>
<p>If you want nicer error messages on WASM but don't use <code>DefaultPlugins</code>, make sure to manually add <code>PanicHandlerPlugin</code> to the app.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MinimalPlugins<span class="z-punctuation z-separator z-rust">,</span> PanicHandlerPlugin</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre>
<h3 id="animationclip-now-uses-uuids-and-nooptypeidhash-is-now-noophash"><a href="https://github.com/bevyengine/bevy/pull/11707"><code>AnimationClip</code> now uses UUIDs and <code>NoOpTypeIdHash</code> is now <code>NoOpHash</code></a>
<a class="anchor-link" href="#animationclip-now-uses-uuids-and-nooptypeidhash-is-now-noophash">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Animation</div>
</div>
<p><code>AnimationClip</code> now uses UUIDs instead of hierarchical paths based on the <code>Name</code> component to refer to bones. This has several consequences:</p>
<ul>
<li>A new component, <code>AnimationTarget</code>, should be placed on each bone that you wish to animate, in order to specify its UUID and the associated <code>AnimationPlayer</code>. The glTF loader automatically creates these components as necessary, so most uses of glTF rigs shouldn’t need to change.</li>
<li>Moving a bone around the tree, or renaming it, no longer prevents an <code>AnimationPlayer</code> from affecting it.</li>
<li>Dynamically changing the <code>AnimationPlayer</code> component will likely require manual updating of the <code>AnimationTarget</code> components.</li>
</ul>
<p>Entities with <code>AnimationPlayer</code> components may now possess descendants that also have <code>AnimationPlayer</code> components. They may not, however, animate the same bones.</p>
<p>Furthermore, <code>NoOpTypeIdHash</code> and <code>NoOpTypeIdHasher</code> have been renamed to <code>NoOpHash</code> and <code>NoOpHasher</code>.</p>
<h3 id="implement-the-animationgraph-to-blend-animations-together"><a href="https://github.com/bevyengine/bevy/pull/11989">Implement the <code>AnimationGraph</code> to blend animations together</a>
<a class="anchor-link" href="#implement-the-animationgraph-to-blend-animations-together">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Animation</div>
</div>
<p><code>AnimationPlayer</code>s can no longer play animations by themselves: they need to be paired with a <code>Handle&lt;AnimationGraph&gt;</code>. Code that used <code>AnimationPlayer</code> to play animations will need to create an <code>AnimationGraph</code> asset first, add a node for the clip (or clips) you want to play, and then supply the index of that node to the <code>AnimationPlayer</code>’s <code>play</code> method.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">setup</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">commands</span><span class="z-punctuation z-separator z-rust">:</span> Commands, <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">animations</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">ResMut<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-meta z-generic z-rust">Assets<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>AnimationClip<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> animation <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">AnimationClip<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> player <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">AnimationPlayer<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    player<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">play</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>animations<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>animation</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        player<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    </span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">setup</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">commands</span><span class="z-punctuation z-separator z-rust">:</span> Commands,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">animations</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">ResMut<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-meta z-generic z-rust">Assets<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>AnimationClip<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> You now need access to the `AnimationGraph` asset.
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">graphs</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">ResMut<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-meta z-generic z-rust">Assets<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>AnimationGraph<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> animation <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">AnimationClip<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Create a new `AnimationGraph` and add the animation handle to it.
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>graph<span class="z-punctuation z-separator z-rust">,</span> animation_index</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">AnimationGraph<span class="z-punctuation z-accessor z-rust">::</span></span>from_clip<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>animations<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>animation</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> player <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">AnimationPlayer<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Play the animation index, not the handle.
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    player<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">play</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>animation_index</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        player<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Add the new `AnimationGraph` to the assets, and spawn the entity with its handle.
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        graphs<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>graph</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    </span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>Furthermore, the <code>AnimationPlayer::play_with_transition()</code> method has been removed and replaced with the <code>AnimationTransitions</code> component. If you were previously using <code>AnimationPlayer::play_with_transition()</code>, add all animations that you were playing to the <code>AnimationGraph</code> and create an <code>AnimationTransitions</code> component to manage the blending between them.</p>
<p>For more information behind this change, you may be interested in <a href="https://github.com/bevyengine/rfcs/blob/main/rfcs/51-animation-composition.md">RFC 51</a>.</p>
<h3 id="multiplying-colors-by-f32-no-longer-ignores-alpha-channel"><a href="https://github.com/bevyengine/bevy/pull/12575">Multiplying colors by <code>f32</code> no longer ignores alpha channel</a>
<a class="anchor-link" href="#multiplying-colors-by-f32-no-longer-ignores-alpha-channel">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Animation</div>
<div class="migration-guide-area-tag">Color</div>
<div class="migration-guide-area-tag">Math</div>
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>It was previously possible to multiply and divide a <code>Color</code> by an <code>f32</code>, which is now removed. You must now operate on a specific color space, such as <code>LinearRgba</code>. Furthermore, these operations used to skip the alpha channel, but that is no longer the case.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span>RgbaLinear <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    red<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    green<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    blue<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    alpha<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span> <span class="z-keyword z-operator z-arithmetic z-rust">*</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Alpha is preserved, ignoring the multiplier.
</span></span><span class="z-source z-rust"><span class="z-support z-macro z-rust">assert_eq!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>color<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">a</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color <span class="z-keyword z-operator z-assignment z-rust">=</span> LinearRgba <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    red<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    green<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    blue<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    alpha<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span> <span class="z-keyword z-operator z-arithmetic z-rust">*</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Alpha is included in multiplication.
</span></span><span class="z-source z-rust"><span class="z-support z-macro z-rust">assert_eq!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>color<span class="z-punctuation z-accessor z-dot z-rust">.</span>alpha<span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p>If you need the alpha channel to remain untouched, consider creating your own helper method:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">legacy_div_f32</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">color</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> LinearRgba, <span class="z-variable z-parameter z-rust">scale</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    color<span class="z-punctuation z-accessor z-dot z-rust">.</span>red <span class="z-keyword z-operator z-assignment z-rust">/=</span> scale<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    color<span class="z-punctuation z-accessor z-dot z-rust">.</span>green <span class="z-keyword z-operator z-assignment z-rust">/=</span> scale<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    color<span class="z-punctuation z-accessor z-dot z-rust">.</span>blue <span class="z-keyword z-operator z-assignment z-rust">/=</span> scale<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> color <span class="z-keyword z-operator z-assignment z-rust">=</span> LinearRgba <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    red<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    green<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    blue<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    alpha<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-support z-function z-rust">legacy_div_f32</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> color<span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">2.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p>If you are fine with the alpha changing, but need it to remain within the range of 0.0 to 1.0, consider clamping it:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> color <span class="z-keyword z-operator z-assignment z-rust">=</span> LinearRgba <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    red<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    green<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    blue<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    alpha<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span> <span class="z-keyword z-operator z-arithmetic z-rust">*</span> <span class="z-constant z-numeric z-float z-rust">10.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Force alpha to be within [0.0, 1.0].
</span></span><span class="z-source z-rust">color<span class="z-punctuation z-accessor z-dot z-rust">.</span>alpha <span class="z-keyword z-operator z-assignment z-rust">=</span> color<span class="z-punctuation z-accessor z-dot z-rust">.</span>alpha<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">clamp</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<!-- TODO: I want this to be a callout, but shortcodes don't work here. -->
<p>Note that in some cases, such as rendering sprites, the alpha is automatically clamped so you do not need to do it manually.</p>
<h3 id="separate-subapp-from-app"><a href="https://github.com/bevyengine/bevy/pull/9202">Separate <code>SubApp</code> from <code>App</code></a>
<a class="anchor-link" href="#separate-subapp-from-app">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">App</div>
</div>
<p><code>SubApp</code> has been separated from <code>App</code>, so there are a few larger changes involved when interacting with these types.</p>
<h4 id="constructing-a-subapp">Constructing a <code>SubApp</code>
<a class="anchor-link" href="#constructing-a-subapp">#</a>
</h4>
<p><code>SubApp</code> no longer contains an <code>App</code>, so you no longer are able to convert an <code>App</code> into a <code>SubApp</code>. Furthermore, the extraction function must now be set outside of the constructor.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">AppLabel<span class="z-punctuation z-separator z-rust">,</span> Clone<span class="z-punctuation z-separator z-rust">,</span> Copy<span class="z-punctuation z-separator z-rust">,</span> Hash<span class="z-punctuation z-separator z-rust">,</span> PartialEq<span class="z-punctuation z-separator z-rust">,</span> Eq<span class="z-punctuation z-separator z-rust">,</span> Debug</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MySubApp</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> app <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> sub_app <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>empty<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust">sub_app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Main<span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-range z-rust">...</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">sub_app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert_resource</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-range z-rust">...</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert_sub_app</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MySubApp<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">SubApp<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>sub_app<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">main_world</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-variable z-parameter z-rust">sub_app</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Extraction function.
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">AppLabel<span class="z-punctuation z-separator z-rust">,</span> Clone<span class="z-punctuation z-separator z-rust">,</span> Copy<span class="z-punctuation z-separator z-rust">,</span> Hash<span class="z-punctuation z-separator z-rust">,</span> PartialEq<span class="z-punctuation z-separator z-rust">,</span> Eq<span class="z-punctuation z-separator z-rust">,</span> Debug</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MySubApp</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> app <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Use `SubApp::new()` instead of `App::new()`.
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> sub_app <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">SubApp<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Instead of setting the extraction function when you create the `SubApp`, you must set it
</span></span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> afterwards. If you do not set an extraction function, it will do nothing.
</span></span><span class="z-source z-rust">sub_app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">set_extract</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">main_world</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-variable z-parameter z-rust">sub_world</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Extraction function.
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> You can still add systems and resources like normal.
</span></span><span class="z-source z-rust">sub_app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Main<span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-range z-rust">...</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">sub_app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert_resource</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-range z-rust">...</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert_sub_app</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MySubApp<span class="z-punctuation z-separator z-rust">,</span> sub_app</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h4 id="app-changes"><code>App</code> changes
<a class="anchor-link" href="#app-changes">#</a>
</h4>
<p><code>App</code> is not <code>Send</code> anymore, but <code>SubApp</code> still is.</p>
<p>Due to the separation of <code>App</code> and <code>SubApp</code>, a few other methods have been changed.</p>
<p>First, <code>App::world</code> as a property is no longer directly accessible. Instead use the getters <code>App::world</code> and <code>App::world_mut</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Component</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyComponent</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> app <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span><span class="z-constant z-other z-placeholder z-rust">{:?}</span><span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> app<span class="z-punctuation z-accessor z-dot z-rust">.</span>world<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span>world<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MyComponent</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> app <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span><span class="z-constant z-other z-placeholder z-rust">{:?}</span><span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">world</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span> <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Notice the added paranthesese.
</span></span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">world_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MyComponent</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p>Secondly, all getters for the sub app now return a <code>SubApp</code> instead of an <code>App</code>. This includes <code>App::sub_app</code>, <code>App::sub_app_mut</code>, <code>App::get_sub_app</code>, and <code>App::get_sub_app_mut</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">AppLabel<span class="z-punctuation z-separator z-rust">,</span> Clone<span class="z-punctuation z-separator z-rust">,</span> Copy<span class="z-punctuation z-separator z-rust">,</span> Hash<span class="z-punctuation z-separator z-rust">,</span> PartialEq<span class="z-punctuation z-separator z-rust">,</span> Eq<span class="z-punctuation z-separator z-rust">,</span> Debug</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MySubApp</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> app <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert_sub_app</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MySubApp<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">SubApp<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-support z-macro z-rust">assert_eq!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">sub_app</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MySubApp</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">type_id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">TypeId<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">of<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>SubApp<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p>Finally, <code>App::runner</code> and <code>App::main_schedule_label</code> are now private. It is no longer possible to get the runner closure, but you can get the main schedule label using <code>SubApp::update_schedule</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> app <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> label <span class="z-keyword z-operator z-assignment z-rust">=</span> app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">main</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span>update_schedule<span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h4 id="3rd-party-traits-on-app">3rd-party traits on <code>App</code>
<a class="anchor-link" href="#3rd-party-traits-on-app">#</a>
</h4>
<p>If you implemented an extension trait on <code>App</code>, consider also implementing it on <code>SubApp</code>:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-trait z-rust"><span class="z-storage z-type z-trait z-rust">trait</span> <span class="z-entity z-name z-trait z-rust">SpawnBundle</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-trait z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-documentation z-rust"><span class="z-punctuation z-definition z-comment z-rust">///</span> Spawns a new `Bundle` into the `World`.
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-trait z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">spawn_bundle</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-separator z-rust">:</span> Bundle<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">self</span>, <span class="z-variable z-parameter z-rust">bundle</span><span class="z-punctuation z-separator z-rust">:</span> T</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-storage z-type z-rust">Self</span></span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-trait z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">SpawnBundle <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">App</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">spawn_bundle</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-separator z-rust">:</span> Bundle<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">self</span>, <span class="z-variable z-parameter z-rust">bundle</span><span class="z-punctuation z-separator z-rust">:</span> T</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-storage z-type z-rust">Self</span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-variable z-language z-rust">self</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">world_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>bundle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-variable z-language z-rust">self</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-documentation z-rust"><span class="z-punctuation z-definition z-comment z-rust">///</span> `SubApp` has a very similar API to `App`, so the code will usually look the same.
</span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">SpawnBundle <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">SubApp</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">spawn_bundle</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-separator z-rust">:</span> Bundle<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">self</span>, <span class="z-variable z-parameter z-rust">bundle</span><span class="z-punctuation z-separator z-rust">:</span> T</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-storage z-type z-rust">Self</span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-variable z-language z-rust">self</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">world_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>bundle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-variable z-language z-rust">self</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<h3 id="make-appexit-more-specific-about-exit-reason"><a href="https://github.com/bevyengine/bevy/pull/13022">Make <code>AppExit</code> more specific about exit reason</a>
<a class="anchor-link" href="#make-appexit-more-specific-about-exit-reason">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">App</div>
</div>
<p>The <code>AppExit</code> event is now an enum that represents whether the code exited successfully or not. If you construct it, you must now specify <code>Success</code> or <code>Error</code>:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">send_exit</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">writer</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">EventWriter<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>AppExit<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    writer<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">send</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>AppExit</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">send_exit</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">writer</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">EventWriter<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>AppExit<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    writer<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">send</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">AppExit<span class="z-punctuation z-accessor z-rust">::</span></span>Success</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Or...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    writer<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">send</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">AppExit<span class="z-punctuation z-accessor z-rust">::</span></span>Error<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">NonZeroU8<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">1</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>If you subscribed to this event in a system, consider <code>match</code>ing whether it was a success or an error:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">handle_exit</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">reader</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">EventReader<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>AppExit<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> app_exit <span class="z-keyword z-operator z-rust">in</span> reader<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">read</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Something interesting here...
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">handle_exit</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">reader</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">EventReader<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>AppExit<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> app_exit <span class="z-keyword z-operator z-rust">in</span> reader<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">read</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-control z-rust">match</span> <span class="z-keyword z-operator z-arithmetic z-rust">*</span>app_exit <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-meta z-path z-rust">AppExit<span class="z-punctuation z-accessor z-rust">::</span></span>Success <span class="z-keyword z-operator z-rust">=&gt;</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Something interesting here...
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-meta z-path z-rust">AppExit<span class="z-punctuation z-accessor z-rust">::</span></span>Error<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>exit_code</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">=&gt;</span> <span class="z-support z-macro z-rust">panic!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>App exiting with an error! (Code: {exit_code})<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>Furthermore, <code>App::run()</code> now returns <code>AppExit</code> instead of the unit type <code>()</code>. Since <code>AppExit</code> implements <a href="https://doc.rust-lang.org/stable/std/process/trait.Termination.html"><code>Termination</code></a>, you can now return it from the main function.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">main</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">main</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> AppExit</span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14 (alternative)
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">main</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> If you want to ignore `AppExit`, you can add a semicolon instead. :)
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>Finally, if you configured a custom <code>App</code> runner function, it will now have to return an <code>AppExit</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> app <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">set_runner</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">_app</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Return success by default, though you may also return an error code.
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-path z-rust">AppExit<span class="z-punctuation z-accessor z-rust">::</span></span>Success
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="deprecate-dynamic-plugins"><a href="https://github.com/bevyengine/bevy/pull/13080">Deprecate dynamic plugins</a>
<a class="anchor-link" href="#deprecate-dynamic-plugins">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">App</div>
</div>
<p>Dynamic plugins are now deprecated. If possible, remove all usage them from your code:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> This would be compiled into a separate dynamic library.
</span></span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">DynamicPlugin</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyPlugin</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">Plugin <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">MyPlugin</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> This would be compiled into the main binary.
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load_plugin</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>path/to/plugin<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> This would now be compiled into the main binary as well.
</span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyPlugin</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">Plugin <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">MyPlugin</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MyPlugin</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre>
<p>If you are unable to do that, you may temporarily silence the deprecation warnings by annotating all usage with <code>#[allow(deprecated)]</code>. Please note that the current dynamic plugin system will be removed by the next major Bevy release, so you will have to migrate eventually. You may be interested in these safer, related links:</p>
<ul>
<li><a href="https://bevyengine.org/assets/#scripting">Bevy Assets - Scripting</a>: Scripting and modding libraries for Bevy</li>
<li><a href="https://bevyengine.org/assets/#development-tools">Bevy Assets - Development tools</a>: Hot reloading and other development functionality</li>
<li><a href="https://github.com/ZettaScaleLabs/stabby"><code>stabby</code></a>: Stable Rust ABI</li>
</ul>
<p>If you truly cannot go without dynamic plugins, you may copy the code from Bevy and add it to your project locally.</p>
<h3 id="move-state-initialization-methods-to-bevy-state"><a href="https://github.com/bevyengine/bevy/pull/13637">Move state initialization methods to <code>bevy::state</code></a>
<a class="anchor-link" href="#move-state-initialization-methods-to-bevy-state">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">App</div>
<div class="migration-guide-area-tag">ECS</div>
</div>
<p><code>State</code> has been moved to <code>bevy::state</code>. With it, <code>App::init_state</code> has been moved from a normal method to an extension trait. You may now need to import <code>AppExtStates</code> in order to use this method, if you don't use the prelude. (This trait is behind the <code>bevy_state</code> feature flag, which you may need to enable.)</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">init_state<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>MyState<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">state<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">app<span class="z-punctuation z-accessor z-rust">::</span></span>AppExtStates <span class="z-keyword z-operator z-rust">as</span> <span class="z-keyword z-operator z-rust">_</span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">init_state<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>MyState<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre>
<h3 id="remove-the-updateassets-and-assetevents-schedules"><a href="https://github.com/bevyengine/bevy/pull/11986">Remove the <code>UpdateAssets</code> and <code>AssetEvents</code> schedules</a>
<a class="anchor-link" href="#remove-the-updateassets-and-assetevents-schedules">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Assets</div>
</div>
<p>The <code>UpdateAssets</code> schedule has been removed. If you add systems to this schedule, move them to run on <code>PreUpdate</code>. (You may need to configure the ordering with <code>system.before(...)</code> and <code>system.after(...)</code>.)</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>DefaultPlugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>UpdateAssets<span class="z-punctuation z-separator z-rust">,</span> my_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>DefaultPlugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>PreUpdate<span class="z-punctuation z-separator z-rust">,</span> my_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre>
<p>Furthermore, <code>AssetEvents</code> has been changed from a <code>ScheduleLabel</code> to a <code>SystemSet</code> within the <code>First</code> schedule.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>DefaultPlugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>AssetEvents<span class="z-punctuation z-separator z-rust">,</span> my_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>DefaultPlugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>First<span class="z-punctuation z-separator z-rust">,</span> my_system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">in_set</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>AssetEvents</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre>
<h3 id="use-async-fn-in-traits-rather-than-boxedfuture"><a href="https://github.com/bevyengine/bevy/pull/12550">Use <code>async fn</code> in traits rather than <code>BoxedFuture</code></a>
<a class="anchor-link" href="#use-async-fn-in-traits-rather-than-boxedfuture">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Assets</div>
</div>
<p>In Rust 1.75, <a href="https://blog.rust-lang.org/2023/12/28/Rust-1.75.0.html#async-fn-and-return-position-impl-trait-in-traits"><code>async fn</code> was stabilized for traits</a>. Some traits have been switched from returning <code>BoxedFuture</code> to be an <code>async fn</code>, specifically:</p>
<ul>
<li><code>AssetReader</code></li>
<li><code>AssetWriter</code></li>
<li><code>AssetLoader</code></li>
<li><code>AssetSaver</code></li>
<li><code>Process</code></li>
</ul>
<p>Please update your trait implementations:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">AssetLoader <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">MyAssetLoader</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">load</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;a</span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;a</span> <span class="z-variable z-parameter z-rust">self</span>,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">reader</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;a</span> <span class="z-storage z-modifier z-rust">mut</span> Reader,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">_settings</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;a</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">_load_context</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;a</span> <span class="z-storage z-modifier z-rust">mut</span> LoadContext,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    </span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> <span class="z-meta z-generic z-rust">BoxedFuture<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;a</span>, <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Result</span><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-meta z-path z-rust"><span class="z-storage z-type z-rust"><span class="z-storage z-type z-rust">Self</span><span class="z-punctuation z-accessor z-rust">::</span></span></span>Asset, <span class="z-meta z-path z-rust"><span class="z-storage z-type z-rust"><span class="z-storage z-type z-rust">Self</span><span class="z-punctuation z-accessor z-rust">::</span></span></span>Error<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Note that you had to pin the future.
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-support z-type z-rust">Box</span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>pin<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>async <span class="z-storage z-modifier z-rust">move</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            <span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> bytes <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-type z-rust">Vec</span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            reader<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">read_to_end</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> bytes</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span>await<span class="z-keyword z-operator z-rust">?</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            <span class="z-support z-type z-rust">Ok</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>bytes</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">AssetLoader <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">MyAssetLoader</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    async <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">load</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;a</span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;a</span> <span class="z-variable z-parameter z-rust">self</span>,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">reader</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;a</span> <span class="z-storage z-modifier z-rust">mut</span> <span class="z-meta z-generic z-rust">Reader<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>&#39;<span class="z-keyword z-operator z-rust">_</span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span>,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">_settings</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;a</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">_load_context</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;a</span> <span class="z-storage z-modifier z-rust">mut</span> <span class="z-meta z-generic z-rust">LoadContext<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>&#39;<span class="z-keyword z-operator z-rust">_</span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span>,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    </span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Result</span><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-meta z-path z-rust"><span class="z-storage z-type z-rust"><span class="z-storage z-type z-rust">Self</span><span class="z-punctuation z-accessor z-rust">::</span></span></span>Asset, <span class="z-meta z-path z-rust"><span class="z-storage z-type z-rust"><span class="z-storage z-type z-rust">Self</span><span class="z-punctuation z-accessor z-rust">::</span></span></span>Error<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> No more need to pin the future, just write it!
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> bytes <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-type z-rust">Vec</span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        reader<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">read_to_end</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> bytes</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span>await<span class="z-keyword z-operator z-rust">?</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-support z-type z-rust">Ok</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>bytes</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>Because these traits now use <code>async</code>, they are no longer object safe. If you need to receive or store <code>&amp;dyn Trait</code>, use the <code>&amp;dyn ErasedTrait</code> variant instead. For instance:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyReader</span></span><span class="z-meta z-struct z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Box</span><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>dyn AssetReader<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyReader</span></span><span class="z-meta z-struct z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Box</span><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>dyn ErasedAssetReader<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="add-ignore-variant-to-processresult"><a href="https://github.com/bevyengine/bevy/pull/12605">Add <code>Ignore</code> variant to <code>ProcessResult</code></a>
<a class="anchor-link" href="#add-ignore-variant-to-processresult">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Assets</div>
</div>
<p>The <code>ProcessResult</code> enum, used in asset loading, has a new <code>Ignore</code> variant. You may need to update your <code>match</code> statements.</p>
<h3 id="removed-into-assetid-t-for-handle-t"><a href="https://github.com/bevyengine/bevy/pull/12655">Removed <code>Into&lt;AssetId&lt;T&gt;&gt;</code> for <code>Handle&lt;T&gt;</code></a>
<a class="anchor-link" href="#removed-into-assetid-t-for-handle-t">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Assets</div>
</div>
<p>Converting from a <code>Handle</code> to an <code>AssetId</code> using <code>Into</code> was removed because it was a footgun that could potentially drop the asset if the <code>Handle</code> was a strong reference. If you need the <code>AssetId</code>, please use <code>Handle::id()</code> instead.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> id<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">AssetId<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> handle<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> id <span class="z-keyword z-operator z-assignment z-rust">=</span> handle<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="add-asyncseek-trait-to-reader-to-be-able-to-seek-inside-asset-loaders"><a href="https://github.com/bevyengine/bevy/pull/12547">Add <code>AsyncSeek</code> trait to <code>Reader</code> to be able to seek inside asset loaders</a>
<a class="anchor-link" href="#add-asyncseek-trait-to-reader-to-be-able-to-seek-inside-asset-loaders">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Assets</div>
</div>
<p>The asset loader's <code>Reader</code> type alias now requires the new <code>AsyncSeek</code> trait. Please implement <code>AsyncSeek</code> for any structures that must be a <code>Reader</code>, or use an alternative if seeking is not supported.</p>
<p>If this is a problem for you, please chime in at <a href="https://github.com/bevyengine/bevy/issues/12880">bevy#12880</a> and help us improve the design for 0.15!</p>
<h3 id="add-error-info-to-loadstate-failed"><a href="https://github.com/bevyengine/bevy/pull/12709">Add error info to <code>LoadState::Failed</code></a>
<a class="anchor-link" href="#add-error-info-to-loadstate-failed">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Assets</div>
</div>
<p>Rust prides itself on its error handling, and Bevy has been steadily catching up. Previously, when checking if an asset was loaded using <code>AssetServer::load_state</code> (and variants), the only information returned on an error was the empty <code>LoadState::Failed</code>. Not very useful for debugging!</p>
<p>Now, a full <code>AssetLoadError</code> is included inside <code>Failed</code> to tell you exactly what went wrong. You may need to update your <code>match</code> and <code>if let</code> statements to handle this new value:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">match</span> asset_server<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load_state</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>asset_id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-path z-rust">LoadState<span class="z-punctuation z-accessor z-rust">::</span></span>Failed <span class="z-keyword z-operator z-rust">=&gt;</span> <span class="z-support z-macro z-rust">eprintln!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>Could not load asset!<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">match</span> asset_server<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load_state</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>asset_id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-path z-rust">LoadState<span class="z-punctuation z-accessor z-rust">::</span></span>Failed<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>error</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">=&gt;</span> <span class="z-support z-macro z-rust">eprintln!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>Could not load asset! Error: <span class="z-constant z-other z-placeholder z-rust">{}</span><span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> error<span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre>
<p>Furthermore, the <code>Copy</code>, <code>PartialOrd</code>, and <code>Ord</code> implementations have been removed from <code>LoadState</code>. You can explicitly call <code>.clone()</code> instead of copying the enum, and you can manually re-implement <code>Ord</code> as a helper method if required.</p>
<h3 id="make-assetmetacheck-a-field-of-assetplugin"><a href="https://github.com/bevyengine/bevy/pull/13177">Make <code>AssetMetaCheck</code> a field of <code>AssetPlugin</code></a>
<a class="anchor-link" href="#make-assetmetacheck-a-field-of-assetplugin">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Assets</div>
</div>
<p><code>AssetMetaCheck</code> is used to configure how the <code>AssetPlugin</code> reads <code>.meta</code> files. It was previously a resource, but now has been changed to a field in <code>AssetPlugin</code>. If you use <code>DefaultPlugins</code>, you can use <code>.set</code> to configure this field.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>DefaultPlugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert_resource</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">AssetMetaCheck<span class="z-punctuation z-accessor z-rust">::</span></span>Never</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>DefaultPlugins<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">set</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>AssetPlugin <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        meta_check<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">AssetMetaCheck<span class="z-punctuation z-accessor z-rust">::</span></span>Never<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre>
<h3 id="make-loadcontext-use-the-builder-pattern"><a href="https://github.com/bevyengine/bevy/pull/13465">Make <code>LoadContext</code> use the builder pattern</a>
<a class="anchor-link" href="#make-loadcontext-use-the-builder-pattern">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Assets</div>
</div>
<!-- Note: This is the migration guide for both #13465 AND #13415. -->
<p><code>LoadContext</code>, used by <code>AssetLoader</code>, has been updated so all of its <code>load_*</code> methods have been merged into a builder struct.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">load_context<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load_direct</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>path</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust">load_context<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">loader</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">direct</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">untyped</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>path</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">load_context<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load_direct_with_reader</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>reader<span class="z-punctuation z-separator z-rust">,</span> path</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust">load_context<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">loader</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">direct</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">with_reader</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>reader</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">untyped</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>path</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">load_context<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load_untyped</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>path</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust">load_context<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">loader</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">untyped</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>path</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">load_context<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load_with_settings</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>path<span class="z-punctuation z-separator z-rust">,</span> settings</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust">load_context<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">loader</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">with_settings</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>settings</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>path</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="use-renderassetusages-to-configure-gltf-meshes-materials-during-load"><a href="https://github.com/bevyengine/bevy/pull/12302">Use <code>RenderAssetUsages</code> to configure gLTF meshes &amp; materials during load</a>
<a class="anchor-link" href="#use-renderassetusages-to-configure-gltf-meshes-materials-during-load">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Assets</div>
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>It is now possible configure whether meshes and materials should be loaded in the main world, the render world, or both with <code>GltfLoaderSettings</code>. The <code>load_meshes</code> field has been changed from a <code>bool</code> to a <code>RenderAssetUsages</code> bitflag, and a new <code>load_materials</code> field as been added.</p>
<p>You may need to update any gLTF <code>.meta</code> files:</p>
<!-- This is technically RON, but it follows a syntax similar to Rust so we use that instead for syntax highlighting. -->
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">load_meshes<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-language z-rust">true</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust">load_meshes<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>MAIN_WORLD | RENDER_WORLD<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre>
<p>If you use <code>AssetServer::load_with_settings</code> instead when loading gLTF files, you will also have to update:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">asset_server<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load_with_settings</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>model.gltf<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">s</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> GltfLoaderSettings<span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    s<span class="z-punctuation z-accessor z-dot z-rust">.</span>load_meshes <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-language z-rust">true</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust">asset_server<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load_with_settings</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>model.gltf<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">s</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> GltfLoaderSettings<span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    s<span class="z-punctuation z-accessor z-dot z-rust">.</span>load_meshes <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">RenderAssetUsages<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">MAIN_WORLD</span> <span class="z-keyword z-operator z-bitwise z-rust">|</span> <span class="z-meta z-path z-rust">RenderAssetUsages<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">RENDER_WORLD</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="consolidate-rendermaterials-and-similar-into-renderassets-implement-renderasset-for-destination-type"><a href="https://github.com/bevyengine/bevy/pull/12827">Consolidate <code>RenderMaterials</code> and similar into <code>RenderAssets</code>, implement <code>RenderAsset</code> for destination type</a>
<a class="anchor-link" href="#consolidate-rendermaterials-and-similar-into-renderassets-implement-renderasset-for-destination-type">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Assets</div>
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>RenderMaterials</code>, <code>RenderMaterials2d</code>, and <code>RenderUiMaterials</code> have all been replaced with the <code>RenderAssets</code> resource. If you need access a <code>PreparedMaterial&lt;T&gt;</code> using an <code>AssetId</code>, use <code>RenderAssets::get</code> instead.</p>
<p>Furthermore, the <code>RenderAsset</code> trait should now be implemented for destination types rather than source types. If you need to access the source type, use the <code>RenderAsset::SourceAsset</code> associated type.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">RenderAsset <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">Image</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-type z-rust">type</span> <span class="z-entity z-name z-type z-rust">PreparedAsset</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> GpuImage<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">RenderAsset <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">GpuImage</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-type z-rust">type</span> <span class="z-entity z-name z-type z-rust">SourceAsset</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> Image<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<h3 id="fix-leftover-references-to-children-when-despawning-audio-entities"><a href="https://github.com/bevyengine/bevy/pull/12407">Fix leftover references to children when despawning audio entities</a>
<a class="anchor-link" href="#fix-leftover-references-to-children-when-despawning-audio-entities">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Audio</div>
</div>
<p>You can configure the behavior of spawned audio with the <code>PlaybackMode</code> enum. One of its variants, <code>PlaybackMode::Despawn</code>, would despawn the entity when the audio finished playing.</p>
<p>There was previously a bug where this would only despawn the entity and not its children. This has been fixed, so now <code>despawn_recursive()</code> is called when the audio finishes.</p>
<p>If you relied on this behavior, consider using <code>PlaybackMode::Remove</code> to just remove the audio components from the entity or <code>AudioSink::empty()</code> to check whether any audio is finished and manually <code>despawn()</code> it.</p>
<h3 id="move-wgsl-math-constants-and-color-operations-from-bevy-pbr-to-bevy-render"><a href="https://github.com/bevyengine/bevy/pull/13209">Move WGSL math constants and color operations from <code>bevy_pbr</code> to <code>bevy_render</code></a>
<a class="anchor-link" href="#move-wgsl-math-constants-and-color-operations-from-bevy-pbr-to-bevy-render">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Color</div>
</div>
<p>Mathematical constants and color conversion functions for shaders have been moved from <code>bevy_pbr::utils</code> to <code>bevy_render::maths</code> and <code>bevy_render::color_operations</code>. If you depended on these in your own shaders, please update your import statements:</p>
<pre data-lang="wgsl" class="language-wgsl z-code"><code class="language-wgsl" data-lang="wgsl"><span class="z-text z-plain">// 0.13
</span><span class="z-text z-plain">#import bevy_pbr::utils::{PI, rgb_to_hsv}
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">// 0.14
</span><span class="z-text z-plain">#import bevy_render::{maths::PI, color_operations::rgb_to_hsv}
</span></code></pre>
<h3 id="remove-old-color-space-utilities"><a href="https://github.com/bevyengine/bevy/pull/12105">Remove old color space utilities</a>
<a class="anchor-link" href="#remove-old-color-space-utilities">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Color</div>
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>The <code>SrgbColorSpace</code> trait, <code>HslRepresentation</code> struct, and <code>LchRepresentation</code> struct have been removed in favor of the specific color space structs.</p>
<p>For <code>SrgbColorSpace</code>, use <code>Srgba::gamma_function()</code> and <code>Srgba::gamma_function_inverse()</code>. If you used the <code>SrgbColorSpace</code> implementation for <code>u8</code>, convert it to an <code>f32</code> first:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 14 is random, this could be any number.
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> nonlinear<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">u8</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">14</span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Apply gamma function, converting `u8` to `f32`.
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> linear<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Srgba<span class="z-punctuation z-accessor z-rust">::</span></span>gamma_function<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>nonlinear <span class="z-keyword z-operator z-rust">as</span> <span class="z-storage z-type z-rust">f32</span> <span class="z-keyword z-operator z-arithmetic z-rust">/</span> <span class="z-constant z-numeric z-float z-rust">255.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Convert back to a `u8`.
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> linear<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">u8</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>linear <span class="z-keyword z-operator z-arithmetic z-rust">*</span> <span class="z-constant z-numeric z-float z-rust">255.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">as</span> <span class="z-storage z-type z-rust">u8</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p>Note that this conversion can be costly, especially if called during the <code>Update</code> schedule. Consider just using <code>f32</code> instead.</p>
<p><code>HslRepresentation</code> and <code>LchRepresentation</code> can be replaced with the <code>From</code> implementations between <code>Srgba</code>, <code>Hsla</code>, and <code>Lcha</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> srgb <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">HslRepresentation<span class="z-punctuation z-accessor z-rust">::</span></span>hsl_to_nonlinear_srgb<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">330.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">7</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">8</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> lch <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">LchRepresentation<span class="z-punctuation z-accessor z-rust">::</span></span>nonlinear_srgb_to_lch<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">94</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">66</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">8</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> srgba<span class="z-punctuation z-separator z-rust">:</span> Srgba <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Hsla<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">330.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">7</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">8</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> lcha<span class="z-punctuation z-separator z-rust">:</span> Lcha <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Srgba<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">94</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">66</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">8</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="use-linearrgba-in-colorattachment"><a href="https://github.com/bevyengine/bevy/pull/12116">Use <code>LinearRgba</code> in <code>ColorAttachment</code></a>
<a class="anchor-link" href="#use-linearrgba-in-colorattachment">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Color</div>
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>ColorAttachment::new()</code> now takes <code>Option&lt;LinearRgba&gt;</code> instead of <code>Option&lt;Color&gt;</code> for the <code>clear_color</code>. You can use the <code>From&lt;Color&gt;</code> implementation to convert your color.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> clear_color<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Option</span><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>LinearRgba<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>color<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="remove-close-on-esc"><a href="https://github.com/bevyengine/bevy/pull/12859">Remove <code>close_on_esc</code></a>
<a class="anchor-link" href="#remove-close-on-esc">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Dev-Tools</div>
</div>
<p>The <code>close_on_esc</code> system was removed because it was too opiniated and lacked customization. If you used this system, you may copy its contents below:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">close_on_esc</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">commands</span><span class="z-punctuation z-separator z-rust">:</span> Commands,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-variable z-parameter z-rust">focused_windows</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Entity, <span class="z-keyword z-operator z-rust">&amp;</span>Window<span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-variable z-parameter z-rust">input</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-meta z-generic z-rust">ButtonInput<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>KeyCode<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>window<span class="z-punctuation z-separator z-rust">,</span> focus</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">in</span> focused_windows<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-control z-rust">if</span> <span class="z-keyword z-operator z-logical z-rust">!</span>focus<span class="z-punctuation z-accessor z-dot z-rust">.</span>focused <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-keyword z-control z-rust">continue</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-control z-rust">if</span> input<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">just_pressed</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">KeyCode<span class="z-punctuation z-accessor z-rust">::</span></span>Escape</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>window</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">despawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>You may be interested in using the built-in keybinds provided by the operating system instead, such as <kbd>Alt+F4</kbd> and <kbd>Command+Q</kbd>.</p>
<h3 id="make-sysinfo-diagnostic-plugin-optional"><a href="https://github.com/bevyengine/bevy/pull/12164">Make <code>sysinfo</code> diagnostic plugin optional</a>
<a class="anchor-link" href="#make-sysinfo-diagnostic-plugin-optional">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Diagnostics</div>
</div>
<p><code>bevy::diagnostic</code> depends on the <code>sysinfo</code> to track CPU and memory usage using <code>SystemInformationDiagnosticsPlugin</code>, but compiling and polling system information can be very slow. <code>sysinfo</code> is now behind the <code>sysinfo_plugin</code> feature flag, which is enabled by default for <code>bevy</code> for <em>not</em> for <code>bevy_diagnostic</code>.</p>
<p>If you depend on <code>bevy_diagnostic</code> directly, toggle the flag in <code>Cargo.toml</code>:</p>
<pre data-lang="toml" class="language-toml z-code"><code class="language-toml" data-lang="toml"><span class="z-source z-toml"><span class="z-punctuation z-definition z-table z-begin z-toml">[</span><span class="z-meta z-tag z-table z-toml"><span class="z-entity z-name z-table z-toml">dependencies</span></span><span class="z-punctuation z-definition z-table z-end z-toml">]</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">bevy_diagnostic</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-inline-table z-begin z-toml">{</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">version</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">&quot;</span>0.14<span class="z-punctuation z-definition z-string z-end z-toml">&quot;</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">features</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-array z-begin z-toml">[</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">&quot;</span>sysinfo_plugin<span class="z-punctuation z-definition z-string z-end z-toml">&quot;</span></span><span class="z-punctuation z-definition z-array z-end z-toml">]</span> <span class="z-punctuation z-definition z-inline-table z-end z-toml">}</span>
</span></code></pre>
<p>If you set <code>default-features = false</code> for <code>bevy</code>, do the same in <code>Cargo.toml</code>:</p>
<pre data-lang="toml" class="language-toml z-code"><code class="language-toml" data-lang="toml"><span class="z-source z-toml"><span class="z-punctuation z-definition z-table z-begin z-toml">[</span><span class="z-meta z-tag z-table z-toml"><span class="z-entity z-name z-table z-toml">dependencies</span></span><span class="z-punctuation z-definition z-table z-end z-toml">]</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">bevy</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-inline-table z-begin z-toml">{</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">version</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">&quot;</span>0.14<span class="z-punctuation z-definition z-string z-end z-toml">&quot;</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">default-features</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-language z-toml">false</span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">features</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-array z-begin z-toml">[</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">&quot;</span>sysinfo_plugin<span class="z-punctuation z-definition z-string z-end z-toml">&quot;</span></span><span class="z-punctuation z-definition z-array z-end z-toml">]</span> <span class="z-punctuation z-definition z-inline-table z-end z-toml">}</span>
</span></code></pre>
<h3 id="improve-tracing-layer-customization"><a href="https://github.com/bevyengine/bevy/pull/13159">Improve <code>tracing</code> layer customization</a>
<a class="anchor-link" href="#improve-tracing-layer-customization">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Diagnostics</div>
</div>
<p>Bevy uses <code>tracing</code> to handle logging and spans through <code>LogPlugin</code>. This could be customized with the <code>update_subscriber</code> field, but it was highly restrictive. This has since been amended, replacing the <code>update_subscriber</code> field with the more flexible <code>custom_layer</code>, which returns a <code>Layer</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">update_subscriber</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">_app</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> App, <span class="z-variable z-parameter z-rust">subscriber</span><span class="z-punctuation z-separator z-rust">:</span> BoxedSubscriber</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> BoxedSubscriber</span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-support z-type z-rust">Box</span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>subscriber<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">with</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>CustomLayer</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>LogPlugin <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        update_subscriber<span class="z-punctuation z-separator z-rust">:</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>update_subscriber</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">log<span class="z-punctuation z-accessor z-rust">::</span></span>tracing_subscriber<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">custom_layer</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">_app</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> App</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Option</span><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>BoxedLayer<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> You can provide a single layer:
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">return</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>CustomLayer<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">boxed</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Or you can provide multiple layers, since `Vec&lt;Layer&gt;` also implements `Layer`:
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-support z-type z-rust">Box</span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-support z-macro z-rust">vec!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">tracing_subscriber<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">fmt<span class="z-punctuation z-accessor z-rust">::</span></span>layer<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">            <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">with_file</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-language z-rust">true</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">            <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">boxed</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        CustomLayer<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">boxed</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    <span class="z-punctuation z-section z-group z-end z-rust">]</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>LogPlugin <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        custom_layer<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p>The <code>BoxedSubscriber</code> type alias has also been removed, it was replaced by the <code>BoxedLayer</code> type alias.</p>
<h3 id="generalised-ecs-reactivity-with-observers"><a href="https://github.com/bevyengine/bevy/pull/10839">Generalised ECS reactivity with Observers</a>
<a class="anchor-link" href="#generalised-ecs-reactivity-with-observers">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p>In 0.14, ECS observers were introduced: mechanisms for immediately responding to events in the world. As part of this change, the <code>Event</code> trait was extended to require <code>Component</code>. <code>#[derive(Event)]</code> now automatically implements <code>Component</code> for the annotated type, which can break types that also <code>#[derive(Component)]</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Event<span class="z-punctuation z-separator z-rust">,</span> Component</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyEvent</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> `Component` is still implemented by the `Event` derive.
</span></span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Event</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyEvent</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p>For more information, see the <a href="/news/bevy-0-14/#ecs-hooks-and-observers">release notes</a> on hooks and observers.</p>
<h3 id="immediately-apply-deferred-system-params-in-system-run"><a href="https://github.com/bevyengine/bevy/pull/11823">Immediately apply deferred system params in <code>System::run</code></a>
<a class="anchor-link" href="#immediately-apply-deferred-system-params-in-system-run">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p>The default implementation of <code>System::run</code> will now always immediately run <code>System::apply_deferred</code>. If you were manually calling <code>System::apply_deferred</code> in this situation, you may remove it. Please note that <code>System::run_unsafe</code> still <em>does not</em> call <code>apply_deferred</code> because it cannot guarantee it will be safe.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>world</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Sometime later:
</span></span><span class="z-source z-rust">system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">apply_deferred</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>world</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust">system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>world</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> `apply_deferred` no longer needs to be called!
</span></span></code></pre>
<h3 id="move-command-and-commandqueue-into-bevy-ecs-world"><a href="https://github.com/bevyengine/bevy/pull/12234">Move <code>Command</code> and <code>CommandQueue</code> into <code>bevy::ecs::world</code></a>
<a class="anchor-link" href="#move-command-and-commandqueue-into-bevy-ecs-world">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p><code>Command</code> and <code>CommandQueue</code> have been moved from <code>bevy::ecs::system</code> to <code>bevy::ecs::world</code>. If you import them directly, you will need to update your import statements.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">ecs<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">system<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>Command<span class="z-punctuation z-separator z-rust">,</span> CommandQueue</span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">ecs<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">world<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>Command<span class="z-punctuation z-separator z-rust">,</span> CommandQueue</span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="make-component-storage-a-constant"><a href="https://github.com/bevyengine/bevy/pull/12311">Make <code>Component::Storage</code> a constant</a>
<a class="anchor-link" href="#make-component-storage-a-constant">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p>The <code>Component::Storage</code> associated type has been replaced with the associated constant <code>STORAGE_TYPE</code>, making the <code>ComponentStorage</code> trait unnecessary. If you were manually implementing <code>Component</code> instead of using the derive macro, update your definitions:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">Component <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">MyComponent</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-type z-rust">type</span> <span class="z-entity z-name z-type z-rust">Storage</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> TableStorage<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">Component <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">MyComponent</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">const</span> <span class="z-constant z-other z-rust">STORAGE_TYPE</span><span class="z-punctuation z-separator z-rust">:</span> StorageType <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">StorageType<span class="z-punctuation z-accessor z-rust">::</span></span>Table<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<table><thead><tr><th>Before</th><th>After</th></tr></thead><tbody>
<tr><td><code>TableStorage</code></td><td><code>StorageType::Table</code></td></tr>
<tr><td><code>SparseStorage</code></td><td><code>StorageType::SparseSet</code></td></tr>
</tbody></table>
<p><code>Component</code> is also now no longer object safe. If you were using <code>dyn Component</code>, please consider <a href="https://github.com/bevyengine/bevy/issues">filing an issue</a> describing your use-case.</p>
<h3 id="don-t-store-access-archetypecomponentid-within-querystate"><a href="https://github.com/bevyengine/bevy/pull/12474">Don't store <code>Access&lt;ArchetypeComponentId&gt;</code> within <code>QueryState</code></a>
<a class="anchor-link" href="#don-t-store-access-archetypecomponentid-within-querystate">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p><code>QueryState</code> no longer stores an <code>Access&lt;ArchetypeComponentId&gt;</code>, you must now pass it as an argument to each method that uses it. To account for this change:</p>
<ul>
<li><code>QueryState::archetype_component_access</code> has been removed. You can work around this by accessing the surrounding <code>SystemState</code>s instead.</li>
<li><code>QueryState::new_archetype</code> and <code>QueryState::update_archetype_component_access</code> now require an <code>&amp;mut Access&lt;ArchetypeComponentId&gt;</code> as a parameter.</li>
</ul>
<h3 id="remove-worldcell"><a href="https://github.com/bevyengine/bevy/pull/12551">Remove <code>WorldCell</code></a>
<a class="anchor-link" href="#remove-worldcell">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p><code>WorldCell</code> has been removed due to its incomplete nature, tendency to generate runtime panics, and the presence of multiple good alternatives. If you were using it to fetch multiple distinct resource values, consider using a <code>SystemState</code> instead with the <code>SystemState::get()</code> method.</p>
<p>If <code>SystemState</code> does not fit your use-case and <code>unsafe</code> is tolerable, you can use <code>UnsafeWorldCell</code>. It is more performant and featureful, but lacks the runtime checks.</p>
<h3 id="return-iterator-instead-of-slice-for-querystate-matched-tables-and-querystate-matches-archtypes"><a href="https://github.com/bevyengine/bevy/pull/12476">Return iterator instead of slice for <code>QueryState::matched_tables</code> and <code>QueryState::matches_archtypes</code></a>
<a class="anchor-link" href="#return-iterator-instead-of-slice-for-querystate-matched-tables-and-querystate-matches-archtypes">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p><code>QueryState::matched_tables</code> and <code>QueryState::matched_archetypes</code> now return iterators instead of slices. If possible, use the combinators available from the <a href="https://doc.rust-lang.org/std/iter/trait.Iterator.html"><code>Iterator</code></a> trait. In a worst-case scenario you may call <code>Iterator::collect()</code> into a <code>Vec</code>, which can then be converted into a slice.</p>
<h3 id="remove-system-stepping-from-default-features"><a href="https://github.com/bevyengine/bevy/pull/12847">Remove system stepping from default features</a>
<a class="anchor-link" href="#remove-system-stepping-from-default-features">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p>The system stepping feature is now disabled by default. It generally should not be included in shipped games, and adds a small but measurable performance overhead. To enable it, add the <code>bevy_debug_stepping</code> feature to your <code>Cargo.toml</code>:</p>
<pre data-lang="toml" class="language-toml z-code"><code class="language-toml" data-lang="toml"><span class="z-source z-toml"><span class="z-punctuation z-definition z-table z-begin z-toml">[</span><span class="z-meta z-tag z-table z-toml"><span class="z-entity z-name z-table z-toml">dependencies</span></span><span class="z-punctuation z-definition z-table z-end z-toml">]</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">bevy</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-inline-table z-begin z-toml">{</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">version</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">&quot;</span>0.14<span class="z-punctuation z-definition z-string z-end z-toml">&quot;</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">features</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-array z-begin z-toml">[</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">&quot;</span>bevy_debug_stepping<span class="z-punctuation z-definition z-string z-end z-toml">&quot;</span></span><span class="z-punctuation z-definition z-array z-end z-toml">]</span> <span class="z-punctuation z-definition z-inline-table z-end z-toml">}</span>
</span></code></pre>
<p>Code using <code>Stepping</code> will still compile with the feature disabled, but will print an error message at runtime if the application calls <code>Stepping::enable()</code>.</p>
<h3 id="optimize-event-updates-and-virtual-time"><a href="https://github.com/bevyengine/bevy/pull/12936">Optimize event updates and virtual time</a>
<a class="anchor-link" href="#optimize-event-updates-and-virtual-time">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p><code>Events::update()</code> has been optimized to be <code>O(1)</code> for the amount of events registered. In doing so, a few systems and run conditions have been changed.</p>
<p>Events are registered to a <code>World</code> using <code>EventRegistry</code> instead of the <code>Events</code> resource:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">world<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert_resource</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Events<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>MyEvent<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">EventRegistry<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">register_event<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>MyEvent<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> world</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p>A few systems and run conditions have been changed as well:</p>
<ul>
<li><code>event_update_system</code> no longer uses generics and now has different arguments.</li>
<li><code>signal_event_update_system</code> now has different arguments.</li>
<li><code>reset_event_update_signal_system</code> has been removed.</li>
<li><code>event_update_condition</code> now has different arguments.</li>
</ul>
<p>While not related to events, the <code>virtual_time_system</code> has been changed as well. It has been converted from a system to a regular function, and now takes <code>&amp;T</code> and <code>&amp;mut T</code> instead of <code>Res&lt;T&gt;</code> and <code>ResMut&lt;T&gt;</code>.</p>
<h3 id="make-systemparam-new-archetype-and-querystate-new-archetype-unsafe"><a href="https://github.com/bevyengine/bevy/pull/13044">Make <code>SystemParam::new_archetype</code> and <code>QueryState::new_archetype</code> unsafe</a>
<a class="anchor-link" href="#make-systemparam-new-archetype-and-querystate-new-archetype-unsafe">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p><code>QueryState::new_archetype</code> and <code>SystemParam::new_archetype</code> are now unsafe functions because they do not ensure that the provided <code>Archetype</code> is from the same <code>World</code> that the state was initialized from. You will need to wrap any usage inside of an <code>unsafe</code> block, and you may need to write additional assertions to verify correct usage.</p>
<h3 id="better-systemid-and-entity-conversion"><a href="https://github.com/bevyengine/bevy/pull/13090">Better <code>SystemId</code> and <code>Entity</code> conversion</a>
<a class="anchor-link" href="#better-systemid-and-entity-conversion">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p>If you need to access the underlying <code>Entity</code> for a one-shot system's <code>SystemId</code>, use the new <code>SystemId::entity()</code> method.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> system_id <span class="z-keyword z-operator z-assignment z-rust">=</span> world<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">register_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>my_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> entity <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Entity<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>system_id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> system_id <span class="z-keyword z-operator z-assignment z-rust">=</span> world<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">register_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>my_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> entity <span class="z-keyword z-operator z-assignment z-rust">=</span> system_id<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="make-nextstate-an-enum"><a href="https://github.com/bevyengine/bevy/pull/11426">Make <code>NextState</code> an enum</a>
<a class="anchor-link" href="#make-nextstate-an-enum">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p><code>NextState</code> has been converted from a unit struct to an enum. If you accessed the internal <code>Option</code> directly, whether through <code>NextState::0</code> or matching, you will have to update your code to handle this change.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> state <span class="z-keyword z-operator z-assignment z-rust">=</span> next_state<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-meta z-path z-rust">NextState<span class="z-punctuation z-accessor z-rust">::</span></span>Pending<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>state</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> next_state <span class="z-keyword z-control z-rust">else</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> <span class="z-support z-macro z-rust">panic!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>No pending next state!<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<table><thead><tr><th>0.13</th><th>0.14</th></tr></thead><tbody>
<tr><td><code>NextState(Some(S))</code></td><td><code>NextState::Pending(S)</code></td></tr>
<tr><td><code>NextState(None)</code></td><td><code>NextState::Unchanged</code></td></tr>
</tbody></table>
<h3 id="separate-states-from-core-ecs"><a href="https://github.com/bevyengine/bevy/pull/13216">Separate states from core ECS</a>
<a class="anchor-link" href="#separate-states-from-core-ecs">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p>States were moved to a separate crate which is gated behind the <code>bevy_state</code> feature. Projects that use state but don't use Bevy's <code>default-features</code> will need to add this feature to their <code>Cargo.toml</code>.</p>
<p>Projects that use <code>bevy_ecs</code> directly and use states will need to add the <code>bevy_state</code> <strong>crate</strong> as a dependency.</p>
<p>Projects that use <code>bevy_app</code> directly and use states will need to add the <code>bevy_state</code> <strong>feature</strong>.</p>
<p>If you do not use <code>DefaultPlugins</code>, you will need to add the <code>StatesPlugin</code> manually to your app.</p>
<p>Users should update imports that referenced the old location.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">ecs<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">schedule<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>NextState<span class="z-punctuation z-separator z-rust">,</span> OnEnter<span class="z-punctuation z-separator z-rust">,</span> OnExit<span class="z-punctuation z-separator z-rust">,</span> OnTransition<span class="z-punctuation z-separator z-rust">,</span> State<span class="z-punctuation z-separator z-rust">,</span> States</span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">ecs<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">schedule<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">common_conditions<span class="z-punctuation z-accessor z-rust">::</span></span>in_state<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">state<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">state<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>NextState<span class="z-punctuation z-separator z-rust">,</span> OnEnter<span class="z-punctuation z-separator z-rust">,</span> OnExit<span class="z-punctuation z-separator z-rust">,</span> OnTransition<span class="z-punctuation z-separator z-rust">,</span> State<span class="z-punctuation z-separator z-rust">,</span> States</span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">state<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">condition<span class="z-punctuation z-accessor z-rust">::</span></span>in_state<span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="constrain-worldquery-get-state-to-only-accept-components"><a href="https://github.com/bevyengine/bevy/pull/13343">Constrain <code>WorldQuery::get_state()</code> to only accept <code>Components</code></a>
<a class="anchor-link" href="#constrain-worldquery-get-state-to-only-accept-components">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p>A few methods of <code>WorldQuery</code> and <code>QueryState</code> were unsound because they were passed an <code>&amp;World</code>. They are now restricted to just take an <code>&amp;Components</code>. The affected methods are:</p>
<ul>
<li><code>WorldQuery::get_state()</code></li>
<li><code>QueryState::transmute()</code></li>
<li><code>QueryState::transmute_filtered()</code></li>
<li><code>QueryState::join()</code></li>
<li><code>QueryState::join_filtered()</code></li>
</ul>
<p>To access <code>Components</code> from a <code>World</code>, call <code>World::components()</code>.</p>
<p>If you manually implemented <code>WorldQuery</code>, you need to update <code>get_state()</code> to only use the information provided by <code>Components</code>.</p>
<h3 id="unify-state-transition-names-to-exited-and-entered"><a href="https://github.com/bevyengine/bevy/pull/13594">Unify state transition names to <code>exited</code> and <code>entered</code></a>
<a class="anchor-link" href="#unify-state-transition-names-to-exited-and-entered">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p><code>StateTransitionEvent</code>'s <code>before</code> and <code>after</code> fields have been renamed to <code>exited</code> and <code>entered</code> for consistency. You will have to update your usage if you access these fields or construct <code>StateTransitionEvent</code>.</p>
<h3 id="make-apply-state-transition-private"><a href="https://github.com/bevyengine/bevy/pull/13626">Make <code>apply_state_transition</code> private</a>
<a class="anchor-link" href="#make-apply-state-transition-private">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p>The <code>apply_state_transition</code> system is no longer public. The easiest way to migrate your systems that depended on it for ordering is to create a custom schedule.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>DefaultPlugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>StateTransition<span class="z-punctuation z-separator z-rust">,</span> my_system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">after</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>apply_state_transition</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">ScheduleLabel<span class="z-punctuation z-separator z-rust">,</span> Debug<span class="z-punctuation z-separator z-rust">,</span> Hash<span class="z-punctuation z-separator z-rust">,</span> PartialEq<span class="z-punctuation z-separator z-rust">,</span> Eq<span class="z-punctuation z-separator z-rust">,</span> Clone</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">AfterStateTransition</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> app <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>DefaultPlugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>AfterStateTransition<span class="z-punctuation z-separator z-rust">,</span> my_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Create a new schedule and add it to the app.
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> after_state_transition <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Schedule<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>AfterStateTransition</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_schedule</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>after_state_transition</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Modify the schedule order to make this run after `StateTransition`.
</span></span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">world_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">resource_mut<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>MainScheduleOrder<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert_after</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>StateTransition<span class="z-punctuation z-separator z-rust">,</span> AfterStateTransition</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre>
<h3 id="replace-fromworld-requirement-with-fromreflect-on-reflectresource"><a href="https://github.com/bevyengine/bevy/pull/12136">Replace <code>FromWorld</code> requirement with <code>FromReflect</code> on <code>ReflectResource</code></a>
<a class="anchor-link" href="#replace-fromworld-requirement-with-fromreflect-on-reflectresource">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
<div class="migration-guide-area-tag">Reflection</div>
</div>
<p><code>#[reflect(Resource)]</code> now requires the <code>FromReflect</code> trait to be implemented for your resource. This is done by default if you use <code>#[derive(Reflect)]</code>, but you structs that opt-out of this behavior will have to write their own implementation. <code>FromReflect</code> was added to replace the <code>FromWorld</code> requirement, though <code>FromReflect</code> is fallible. You may wish to add <code>#[reflect(FromWorld)]</code> to your resources to maintain an infallible variant.</p>
<p>Finally, if you use the <code>ReflectResource</code> struct you will need to pass a <code>&amp;TypeRegistry</code> to its <code>insert</code>, <code>apply_or_insert</code>, and <code>copy</code> methods.</p>
<h3 id="make-reflectcomponentfns-and-reflectbundlefns-methods-work-with-entitymut"><a href="https://github.com/bevyengine/bevy/pull/12895">Make <code>ReflectComponentFns</code> and <code>ReflectBundleFns</code> methods work with <code>EntityMut</code></a>
<a class="anchor-link" href="#make-reflectcomponentfns-and-reflectbundlefns-methods-work-with-entitymut">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
<div class="migration-guide-area-tag">Reflection</div>
</div>
<p><code>ReflectComponentFns</code> and <code>ReflectBundleFns</code> have been updated to work with <code>EntityMut</code>, as compared to the more restricting <code>EntityWorldMut</code>. You will have to update your usage of <code>ReflectComponentFns::apply</code>, <code>ReflectComponentFns::reflect_mut</code>, and <code>ReflectBundleFns::apply</code>.</p>
<p>If you just use <code>ReflectComponent</code> and <code>ReflectBundle</code>, you will not have change your code because <code>EntityWorldMut</code> implements <code>Into&lt;EntityMut&gt;</code>.</p>
<h3 id="require-typeregistry-in-reflectbundle-insert"><a href="https://github.com/bevyengine/bevy/pull/12499">Require <code>TypeRegistry</code> in <code>ReflectBundle::insert()</code></a>
<a class="anchor-link" href="#require-typeregistry-in-reflectbundle-insert">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
<div class="migration-guide-area-tag">Reflection</div>
</div>
<p><code>ReflectBundle::insert</code> now requires an additional <code>&amp;TypeRegistry</code> parameter.</p>
<h3 id="rename-multi-threaded-feature-to-multi-threaded"><a href="https://github.com/bevyengine/bevy/pull/12997">Rename <code>multi-threaded</code> feature to <code>multi_threaded</code></a>
<a class="anchor-link" href="#rename-multi-threaded-feature-to-multi-threaded">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
<div class="migration-guide-area-tag">Tasks</div>
</div>
<p>The <code>multi-threaded</code> feature has been renamed to <code>multi_threaded</code> for <code>bevy</code>, <code>bevy_asset</code>, <code>bevy_ecs</code>, <code>bevy_render</code>, <code>bevy_tasks</code>, and <code>bevy_internal</code>. Please update your <code>Cargo.toml</code> if you manually specify Bevy features.</p>
<h3 id="moves-intern-and-label-modules-from-bevy-utils-to-bevy-ecs"><a href="https://github.com/bevyengine/bevy/pull/12772">Moves <code>intern</code> and <code>label</code> modules from <code>bevy::utils</code> to <code>bevy::ecs</code></a>
<a class="anchor-link" href="#moves-intern-and-label-modules-from-bevy-utils-to-bevy-ecs">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
<div class="migration-guide-area-tag">Utils</div>
</div>
<p>The <code>bevy::utils::label</code> and <code>bevy::utils::intern</code> modules have been moved to <code>bevy::ecs</code>, as well as the <code>bevy::utils::define_label</code> macro as part of an active effort to shrink <code>bevy::utils</code>. You will have to update your import statements to use the new paths.</p>
<h3 id="gizmo-line-joints"><a href="https://github.com/bevyengine/bevy/pull/12252">Gizmo line joints</a>
<a class="anchor-link" href="#gizmo-line-joints">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Gizmos</div>
</div>
<p>Line joins have been added for gizmos, allowing for smooth or sharp corners between lines. If you manually created your own <code>GizmoConfig</code>, you will have to specify the type of line joins with the <code>line_joins</code> field.</p>
<p>The <code>Default</code> implementation of <code>GizmoLineJoint</code> is <code>None</code>, but you may be interested in <code>Miter</code> for sharp joints or <code>Round</code> for smooth joints.</p>
<h3 id="gizmo-line-styles"><a href="https://github.com/bevyengine/bevy/pull/12394">Gizmo line styles</a>
<a class="anchor-link" href="#gizmo-line-styles">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Gizmos</div>
</div>
<p>It is now possible to configure the line style (such as solid or dotted) of gizmos using <code>GizmoConfig::line_style</code>. If you manually create a <code>GizmoConfig</code>, you will have to specify this field.</p>
<h3 id="rename-segments-methods-to-resolution"><a href="https://github.com/bevyengine/bevy/pull/13438">Rename <code>segments()</code> methods to <code>resolution()</code></a>
<a class="anchor-link" href="#rename-segments-methods-to-resolution">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Gizmos</div>
</div>
<p>All gizmo methods named <code>segments()</code> have been rename to <code>resolution()</code> in order to be consistent with <code>bevy::render</code>.</p>
<h3 id="make-gizmos-take-primitives-as-a-reference"><a href="https://github.com/bevyengine/bevy/pull/13534">Make gizmos take primitives as a reference</a>
<a class="anchor-link" href="#make-gizmos-take-primitives-as-a-reference">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Gizmos</div>
</div>
<p><code>Gizmos::primitive_2d()</code> and <code>Gizmos::primitive_3d()</code> now take the primitive as a reference so that non-<code>Copy</code> primitives do not need to be cloned each time they are drawn.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">draw</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">gizmos</span><span class="z-punctuation z-separator z-rust">:</span> Gizmos</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> polygon <span class="z-keyword z-operator z-assignment z-rust">=</span> Polygon <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        vertices<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">            <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Since `Polygon` is not `Copy`, you would need to clone it if you use it more than once.
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    gizmos<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">primitive_2d</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>polygon<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">clone</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Vec2<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">ZERO</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">WHITE</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    gizmos<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">primitive_2d</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>polygon<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Vec2<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">ONE</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">BLACK</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">draw</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">gizmos</span><span class="z-punctuation z-separator z-rust">:</span> Gizmos</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> polygon <span class="z-keyword z-operator z-assignment z-rust">=</span> Polygon <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        vertices<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">            <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> No need to clone the polygon anymore!
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    gizmos<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">primitive_2d</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>polygon<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Vec2<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">ZERO</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">WHITE</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    gizmos<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">primitive_2d</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>polygon<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Vec2<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">ONE</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">BLACK</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<h3 id="more-gizmos-builders"><a href="https://github.com/bevyengine/bevy/pull/13261">More gizmos builders</a>
<a class="anchor-link" href="#more-gizmos-builders">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Gizmos</div>
</div>
<p><code>Gizmos::primitive_2d(CIRLCE)</code>, <code>Gizmos::primitive_2d(ELLIPSE)</code>, <code>Gizmos::primitive_2d(ANNULUS)</code>, and <code>Gizmos::primitive_3d(SPHERE)</code> now return their corresponding builders instead of the unit type <code>()</code>. Furthermore, <code>SphereBuilder::circle_segments()</code> has been renamed to <code>resolution()</code>.</p>
<h3 id="rename-touchpad-input-to-gesture"><a href="https://github.com/bevyengine/bevy/pull/13660">Rename touchpad input to gesture</a>
<a class="anchor-link" href="#rename-touchpad-input-to-gesture">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Input</div>
</div>
<p>In a recent <code>winit</code> update, touchpad events can now be triggered on mobile. To account for this, touchpad-related items have been renamed to gestures:</p>
<ul>
<li><code>bevy::input::touchpad</code> has been renamed to <code>bevy::input::gestures</code>.</li>
<li><code>TouchpadMagnify</code> has been renamed to <code>PinchGesture</code>.</li>
<li><code>TouchpadRotate</code> has been renamed to <code>RotationGesture</code>.</li>
</ul>
<h3 id="deprecate-receivedcharacter"><a href="https://github.com/bevyengine/bevy/pull/12868">Deprecate <code>ReceivedCharacter</code></a>
<a class="anchor-link" href="#deprecate-receivedcharacter">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Input</div>
<div class="migration-guide-area-tag">Windowing</div>
</div>
<p><code>ReceivedCharacter</code> is now deprecated due to <code>winit</code> reworking their keyboard system, switch to using <code>KeyboardInput</code> instead.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">listen_characters</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">events</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">EventReader<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>ReceivedCharacter<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> event <span class="z-keyword z-operator z-rust">in</span> events<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">read</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-support z-macro z-rust">info!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>{}<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-separator z-rust">,</span> event<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-storage z-type z-rust">char</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">listen_characters</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">events</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">EventReader<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>KeyboardInput<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> event <span class="z-keyword z-operator z-rust">in</span> events<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">read</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Only check for characters when the key is pressed.
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-control z-rust">if</span> <span class="z-keyword z-operator z-logical z-rust">!</span>event<span class="z-punctuation z-accessor z-dot z-rust">.</span>state<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">is_pressed</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-keyword z-control z-rust">continue</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Note that some keys such as `Space` and `Tab` won&#39;t be detected as a character.
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Instead, check for them as separate enum variants.
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-control z-rust">match</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>event<span class="z-punctuation z-accessor z-dot z-rust">.</span>logical_key <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-meta z-path z-rust">Key<span class="z-punctuation z-accessor z-rust">::</span></span>Character<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>character</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">=&gt;</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                <span class="z-support z-macro z-rust">info!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>{} pressed.<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-separator z-rust">,</span> character</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-meta z-path z-rust">Key<span class="z-punctuation z-accessor z-rust">::</span></span>Space <span class="z-keyword z-operator z-rust">=&gt;</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                <span class="z-support z-macro z-rust">info!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>Space pressed.<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-keyword z-operator z-rust">_</span> <span class="z-keyword z-operator z-rust">=&gt;</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<h3 id="add-winitevent-keyboardfocuslost"><a href="https://github.com/bevyengine/bevy/pull/13678">Add <code>WinitEvent::KeyboardFocusLost</code></a>
<a class="anchor-link" href="#add-winitevent-keyboardfocuslost">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Input</div>
<div class="migration-guide-area-tag">Windowing</div>
</div>
<p><code>WinitEvent</code> has a new enum variant: <code>WinitEvent::KeyboardFocusLost</code>. This was added as part of a fix where key presses would stick when losing focus of the Bevy window, such as with <kbd>Alt + Tab</kbd>. Please update any <code>match</code> statements.</p>
<h3 id="move-direction-types-out-of-bevy-math-primitives"><a href="https://github.com/bevyengine/bevy/pull/12018">Move direction types out of <code>bevy::math::primitives</code></a>
<a class="anchor-link" href="#move-direction-types-out-of-bevy-math-primitives">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
</div>
<p>The <code>Direction2d</code>, <code>Direction3d</code>, and <code>InvalidDirectionError</code> types have been moved from <code>bevy::math::primitives</code> to <code>bevy::math</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">math<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">primitives<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>Direction2d<span class="z-punctuation z-separator z-rust">,</span> Direction3d<span class="z-punctuation z-separator z-rust">,</span> InvalidDirectionError</span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">math<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>Direction2d<span class="z-punctuation z-separator z-rust">,</span> Direction3d<span class="z-punctuation z-separator z-rust">,</span> InvalidDirectionError</span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="rename-direction2d-3d-to-dir2-3"><a href="https://github.com/bevyengine/bevy/pull/12189">Rename <code>Direction2d/3d</code> to <code>Dir2/3</code></a>
<a class="anchor-link" href="#rename-direction2d-3d-to-dir2-3">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
</div>
<p>The <code>Direction2d</code> and <code>Direction3d</code> types have been renamed to <code>Dir2</code> and <code>Dir3</code>. They have been shortened to make them easier to type, and to make them consistent with <code>glam</code>'s shorter naming scheme (e.g. <code>Vec2</code>, <code>Mat4</code>).</p>
<h3 id="make-cardinal-splines-include-endpoints"><a href="https://github.com/bevyengine/bevy/pull/12574">Make cardinal splines include endpoints</a>
<a class="anchor-link" href="#make-cardinal-splines-include-endpoints">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
</div>
<p>There was a bug in <code>CubicCardinalSpline</code> where the curve would only pass through the interior control points, not the points at the beginning and end. (For an in-depth analysis, see <a href="https://github.com/bevyengine/bevy/issues/12570">this issue</a>.) This has been fixed so that the curve passes through all control points, but it may break behavior you were depending on.</p>
<p>If you rely on the old behavior of <code>CubicCardinalSpline</code>, you will have to truncate any parametrizations you used in order to access a curve identical to the one you had previously. This can be done by chopping off a unit-distance segment from each end of the parametrizing interval. For instance, if your code looks as follows:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">interpolate</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">t</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> Vec2</span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> points <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-support z-function z-rust">vec2</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-constant z-numeric z-float z-rust">20.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-support z-function z-rust">vec2</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">3.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">2.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-support z-function z-rust">vec2</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">5.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">3.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-support z-function z-rust">vec2</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">9.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">8.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">    <span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> my_curve <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">CubicCardinalSpline<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">3</span><span class="z-punctuation z-separator z-rust">,</span> points</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">to_curve</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    my_curve<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">position</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>t</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>Then in order to obtain similar behavior, <code>t</code> will need to be shifted up by 1 (since the output of <code>CubicCardinalSpline::to_curve</code> has introduced a new segment in the interval [0,1]), displacing the old segment from [0,1] to [1,2]:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">interpolate</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">t</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> Vec2</span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> points <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-support z-function z-rust">vec2</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-constant z-numeric z-float z-rust">20.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-support z-function z-rust">vec2</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">3.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">2.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-support z-function z-rust">vec2</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">5.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">3.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-support z-function z-rust">vec2</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">9.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">8.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">    <span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> my_curve <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">CubicCardinalSpline<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">3</span><span class="z-punctuation z-separator z-rust">,</span> points</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">to_curve</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Add 1 here to restore original behavior.
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    my_curve<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">position</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>t <span class="z-keyword z-operator z-arithmetic z-rust">+</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">1</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>(Note that this does not provide identical output for values of <code>t</code> outside of the interval [0,1].)</p>
<p>On the other hand, any user who was specifying additional endpoint tangents simply to get the curve to pass through the right points (i.e. not requiring exactly the same output) can simply omit the endpoints that were being supplied only for control purposes.</p>
<h3 id="replace-point-with-vectorspace"><a href="https://github.com/bevyengine/bevy/pull/12747">Replace <code>Point</code> with <code>VectorSpace</code></a>
<a class="anchor-link" href="#replace-point-with-vectorspace">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
</div>
<p>The <code>Point</code> trait has been replaced by <code>VectorSpace</code>. These traits are very similar, with a few minor changes:</p>
<ul>
<li><code>VectorSpace</code> implementations must now provide the <code>ZERO</code> constant.</li>
<li><code>VectorSpace</code> now requires the <code>Div&lt;f32, Output = Self&gt;</code> and <code>Neg</code> trait bounds.</li>
<li><code>VectorSpace</code> no longer requires the <code>Add&lt;f32, Output = Self&gt;</code>, <code>Sum</code>, and <code>PartialEq</code> trait bounds.</li>
</ul>
<p>For most cases you can replace all <code>Point</code> usage with <code>VectorSpace</code>, but you may have to make further changes if you depend on anything in the list above.</p>
<h3 id="uv-mapping-change-for-triangle2d"><a href="https://github.com/bevyengine/bevy/pull/12686">UV-mapping change for <code>Triangle2d</code></a>
<a class="anchor-link" href="#uv-mapping-change-for-triangle2d">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
</div>
<p>The UV-mapping of <code>Triangle2d</code> has changed with this PR: the main difference is that the UVs are no longer dependent on the triangle’s absolute coordinates but instead follow translations of the triangle itself in its definition. If you depended on the old UV-coordinates for <code>Triangle2d</code>, then you will have to update affected areas to use the new ones which can be briefly described as follows:</p>
<ul>
<li>The first coordinate is parallel to the line between the first two vertices of the triangle.</li>
<li>The second coordinate is orthogonal to this, pointing in the direction of the third point.</li>
</ul>
<p>Generally speaking, this means that the first two points will have coordinates <code>[_, 0.]</code>, while the third coordinate will be <code>[_, 1.]</code>, with the exact values depending on the position of the third point relative to the first two. For acute triangles, the first two vertices always have UV-coordinates <code>[0., 0.]</code> and <code>[1., 0.]</code> respectively. For obtuse triangles, the third point will have coordinate <code>[0., 1.]</code> or <code>[1., 1.]</code>, with the coordinate of one of the two other points shifting to maintain proportionality.</p>
<p>For example: </p>
<ul>
<li>The default <code>Triangle2d</code> has UV-coordinates <code>[0., 0.]</code>, <code>[0., 1.]</code>, [<code>0.5, 1.]</code>.</li>
<li>The triangle with vertices <code>vec2(0., 0.)</code>, <code>vec2(1., 0.)</code>, <code>vec2(2., 1.)</code> has UV-coordinates <code>[0., 0.]</code>, <code>[0.5, 0.]</code>, <code>[1., 1.]</code>.</li>
<li>The triangle with vertices <code>vec2(0., 0.)</code>, <code>vec2(1., 0.)</code>, <code>vec2(-2., 1.)</code> has UV-coordinates <code>[2./3., 0.]</code>, <code>[1., 0.]</code>, <code>[0., 1.]</code>.</li>
</ul>
<h3 id="use-vec3a-for-3d-bounding-volumes-and-raycasts"><a href="https://github.com/bevyengine/bevy/pull/13087">Use <code>Vec3A</code> for 3D bounding volumes and raycasts</a>
<a class="anchor-link" href="#use-vec3a-for-3d-bounding-volumes-and-raycasts">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
</div>
<p><code>Aabb3d</code>, <code>BoundingSphere</code>, and <code>RayCast3d</code> now use <code>Vec3A</code> instead of <code>Vec3</code> internally. <code>Vec3A</code> is the SIMD-accelerated form of <code>Vec3</code>, so it should provide performance improvements without visible changes in behavior.</p>
<p>If you manually construct any of the affected structs, you will have to convert into a <code>Vec3A</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> x <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">5.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-constant z-numeric z-float z-rust">2.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> aabb <span class="z-keyword z-operator z-assignment z-rust">=</span> Aabb3d <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    min<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">ZERO</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    max<span class="z-punctuation z-separator z-rust">:</span> x<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> x <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">5.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-constant z-numeric z-float z-rust">2.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> aabb <span class="z-keyword z-operator z-assignment z-rust">=</span> Aabb3d <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Both variants are very similar, so you can usually replace `Vec3` with `Vec3A`.
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    min<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Vec3A<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">ZERO</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> In cases where you cannot, use the `From` and `Into` traits.
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    max<span class="z-punctuation z-separator z-rust">:</span> x<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="update-glam-to-0-27"><a href="https://github.com/bevyengine/bevy/pull/12757">Update <code>glam</code> to 0.27</a>
<a class="anchor-link" href="#update-glam-to-0-27">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
</div>
<p><code>glam</code> has been updated from 0.25 to 0.27. Please view <a href="https://github.com/bitshifter/glam-rs/blob/e1b521a4c8146f27b97e510d38fab489c39650d1/CHANGELOG.md#0270---2024-03-23">the changelog</a> for both 0.26 and 0.27 to update your code.</p>
<p>The largest breaking change is that the <code>fract()</code> method for vector types now evaluates as <code>self - self.trunc()</code> instead of <code>self - self.floor()</code>. If you require the old behavior, use the <code>fract_gl()</code> method instead.</p>
<h3 id="common-meshbuilder-trait"><a href="https://github.com/bevyengine/bevy/pull/13411">Common <code>MeshBuilder</code> trait</a>
<a class="anchor-link" href="#common-meshbuilder-trait">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>All shape mesh builders (<code>ConeMeshBuilder</code>, <code>PlaneMeshBuilder</code>, etc.) have a method <code>build()</code> for converting into a <code>Mesh</code>. This method has been made into a common trait <code>MeshBuilder</code>. You will need to import this trait if you use <code>build()</code> but do not use the prelude.</p>
<h3 id="add-angle-range-to-torusmeshbuilder"><a href="https://github.com/bevyengine/bevy/pull/13605">Add angle range to <code>TorusMeshBuilder</code></a>
<a class="anchor-link" href="#add-angle-range-to-torusmeshbuilder">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>TorusMeshBuilder</code> is no longer <code>Copy</code> because it contains a <code>RangeInclusive</code> (<code>x..=y</code>) for the angle range. You will need to call <code>clone()</code> manually in any scenario where it was implicitly copied before.</p>
<h3 id="add-subdivisions-to-planemeshbuilder"><a href="https://github.com/bevyengine/bevy/pull/13580">Add subdivisions to <code>PlaneMeshBuilder</code></a>
<a class="anchor-link" href="#add-subdivisions-to-planemeshbuilder">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>In 0.13 the <code>Plane</code> type was deprecated in favor of <code>Plane2d</code> and <code>Plane3d</code>. The new plane types did not provide a method for subdivision, which is now amended.</p>
<p>If you used the <code>Plane::subdivisions</code> property, you now need to convert a <code>Plane3d</code> into a <code>PlaneMeshBuilder</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> plane <span class="z-keyword z-operator z-assignment z-rust">=</span> Plane <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    subdivisions<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">10</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> plane <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Plane3d<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">mesh</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">subdivisions</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">10</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="make-transform-rotate-axis-and-transform-rotate-local-axis-use-dir3"><a href="https://github.com/bevyengine/bevy/pull/12986">Make <code>Transform::rotate_axis</code> and <code>Transform::rotate_local_axis</code> use <code>Dir3</code></a>
<a class="anchor-link" href="#make-transform-rotate-axis-and-transform-rotate-local-axis-use-dir3">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
<div class="migration-guide-area-tag">Transform</div>
</div>
<p><code>Transform::rotate_axis()</code> and <code>Transform::rotate_local_axis()</code> now require a <code>Dir3</code> instead of a <code>Vec3</code> because the axis is expected to be normalized. In general you can call <code>Dir3::new()</code> with a <code>Vec3</code>, which will automatically normalize it, though you must handle the <code>Result</code> in case the vector is invalid.</p>
<p>Note that most constants like <code>Vec3::X</code> have a corresponding <code>Dir3</code> variant, such as <code>Dir3::X</code>.</p>
<h3 id="use-dir3-for-local-axis-methods-in-globaltransform"><a href="https://github.com/bevyengine/bevy/pull/13264">Use <code>Dir3</code> for local axis methods in <code>GlobalTransform</code></a>
<a class="anchor-link" href="#use-dir3-for-local-axis-methods-in-globaltransform">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
<div class="migration-guide-area-tag">Transform</div>
</div>
<p>The <code>GlobalTransform</code> component's directional axis methods (<code>right()</code>, <code>left()</code>, <code>up()</code>, <code>down()</code>, <code>back()</code>, <code>forward()</code>) have been updated from returning a <code>Vec3</code> to a <code>Dir3</code>. <code>Dir3</code> implements <code>Deref&lt;Target = Vec&gt;</code>, but if you need mutable access you can call <code>Vec3::from()</code>.</p>
<h3 id="fix-ord-and-partialord-differing-for-floatord"><a href="https://github.com/bevyengine/bevy/pull/12711">Fix <code>Ord</code> and <code>PartialOrd</code> differing for <code>FloatOrd</code></a>
<a class="anchor-link" href="#fix-ord-and-partialord-differing-for-floatord">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
<div class="migration-guide-area-tag">Utils</div>
</div>
<p><code>FloatOrd</code>'s <code>PartialOrd</code> implementation used to differ in behavior from its <code>Ord</code> implementation, but it has since been fixed so they both now match. The current implementation of <code>PartialOrd</code> will never return <code>None</code>, as it now falls back to the <code>Ord</code> implementation. If you depended on this mismatched behavior, consider using the <code>PartialOrd</code> implementation on the inner <code>f32</code>.</p>
<h3 id="move-floatord-into-bevy-math"><a href="https://github.com/bevyengine/bevy/pull/12732">Move <code>FloatOrd</code> into <code>bevy::math</code></a>
<a class="anchor-link" href="#move-floatord-into-bevy-math">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
<div class="migration-guide-area-tag">Utils</div>
</div>
<p><code>FloatOrd</code> has been moved to into the <code>bevy::math</code> module. Please update your import statements:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">utils<span class="z-punctuation z-accessor z-rust">::</span></span>FloatOrd<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">math<span class="z-punctuation z-accessor z-rust">::</span></span>FloatOrd<span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="change-reflectserialize-trait-bounds"><a href="https://github.com/bevyengine/bevy/pull/12024">Change <code>ReflectSerialize</code> trait bounds</a>
<a class="anchor-link" href="#change-reflectserialize-trait-bounds">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Reflection</div>
</div>
<p><code>ReflectSerialize</code> now requires the <code>TypePath</code> and <code>FromReflect</code> trait bounds instead of <code>Reflect</code>. You will have to implement these traits if you previously opted-out of them. For instance, if you used <code>#[reflect(type_path = false)]</code> or <code>#[reflect(from_reflect = false)]</code>, you will have to remove them.</p>
<h3 id="recursive-registration-of-types"><a href="https://github.com/bevyengine/bevy/pull/5781">Recursive registration of types</a>
<a class="anchor-link" href="#recursive-registration-of-types">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Reflection</div>
</div>
<p>It is now possible to recursively register types, but in doing so all (unignored) reflected fields need to implement <code>GetTypeRegistration</code>. This is automatically done when <code>Reflect</code> is derived, but manual implementations will need to also implement <code>GetTypeRegistration</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Reflect</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-generic z-rust"><span class="z-entity z-name z-struct z-rust">Foo</span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-separator z-rust">:</span> FromReflect<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span></span><span class="z-meta z-struct z-rust"> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">data</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-meta z-generic z-rust">MyCustomType<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span></span><span class="z-meta z-impl z-rust"><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-separator z-rust">:</span> FromReflect<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-meta z-impl z-rust"> Reflect <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">MyCustomType</span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span></span><span class="z-meta z-impl z-rust"><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-separator z-rust">:</span> FromReflect <span class="z-keyword z-operator z-rust">+</span> GetTypeRegistration<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-meta z-impl z-rust"> Reflect <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">MyCustomType</span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span></span><span class="z-meta z-impl z-rust"><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-separator z-rust">:</span> FromReflect <span class="z-keyword z-operator z-rust">+</span> GetTypeRegistration<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-meta z-impl z-rust"> GetTypeRegistration <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">MyCustomType</span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<h3 id="rename-untypedreflectdeserializer-to-reflectdeserializer"><a href="https://github.com/bevyengine/bevy/pull/12721">Rename <code>UntypedReflectDeserializer</code> to <code>ReflectDeserializer</code></a>
<a class="anchor-link" href="#rename-untypedreflectdeserializer-to-reflectdeserializer">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Reflection</div>
</div>
<p><code>UntypedReflectDeserializer</code> has been renamed to <code>ReflectDeserializer</code>. Any usage will need to be updated accordingly:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> reflect_deserializer <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">UntypedReflectDeserializer<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>registry</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> reflect_deserializer <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">ReflectDeserializer<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>registry</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="implement-reflect-for-result-as-an-enum"><a href="https://github.com/bevyengine/bevy/pull/13182">Implement <code>Reflect</code> for <code>Result</code> as an enum</a>
<a class="anchor-link" href="#implement-reflect-for-result-as-an-enum">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Reflection</div>
</div>
<p><code>Result</code>'s <code>Reflect</code> implementation has been changed to make it a <code>ReflectKind::Enum</code> instead of a <code>ReflectKind::Value</code>. This increases its consistency with <code>Option</code> and allows for inspection of its contents.</p>
<p>Now, <code>Result&lt;T, E&gt;</code> no longer requires both <code>T</code> and <code>E</code> to be <code>Clone</code>, but instead requires them to implement <code>FromReflect</code>. Additionally, <code>&lt;Result&lt;T, E&gt; as Reflect&gt;::reflect_*</code> now returns the <code>Enum</code> variant instead of <code>Value</code>.</p>
<h3 id="serialize-scene-with-typeregistry-and-rename-serialize-ron-to-serialize"><a href="https://github.com/bevyengine/bevy/pull/12715">Serialize scene with <code>&amp;TypeRegistry</code> and rename <code>serialize_ron()</code> to <code>serialize()</code></a>
<a class="anchor-link" href="#serialize-scene-with-typeregistry-and-rename-serialize-ron-to-serialize">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Reflection</div>
<div class="migration-guide-area-tag">Scenes</div>
</div>
<p><code>SceneSerializer</code> and all related serialization helpers now take <code>&amp;TypeRegistry</code> instead of <code>&amp;TypeRegistryArc</code>. You can access the former from the latter with <code>TypeRegistryArc::read()</code>.</p>
<p>Furthermore, <code>DynamicScene::serialize_ron()</code> has been renamed to <code>serialize()</code>. This has been done to highlight that this function is not about serializing into RON specifically, but rather the official Bevy scene format (<code>.scn</code> / <code>.scn.ron</code>). This leaves room to change the format in the future, if need be.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> world <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">World<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> scene <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">DynamicScene<span class="z-punctuation z-accessor z-rust">::</span></span>from_world<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>world</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> type_registry_arc<span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>TypeRegistryArc <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-keyword z-operator z-arithmetic z-rust">*</span><span class="z-keyword z-operator z-arithmetic z-rust">*</span>world<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">resource<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>AppTypeRegistry<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> serialized_scene <span class="z-keyword z-operator z-assignment z-rust">=</span> scene<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">serialize_ron</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>type_registry_arc</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> world <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">World<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> scene <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">DynamicScene<span class="z-punctuation z-accessor z-rust">::</span></span>from_world<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>world</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> type_registry_arc<span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>TypeRegistryArc <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-keyword z-operator z-arithmetic z-rust">*</span><span class="z-keyword z-operator z-arithmetic z-rust">*</span>world<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">resource<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>AppTypeRegistry<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> We now need to retrieve the inner `TypeRegistry`.
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> type_registry <span class="z-keyword z-operator z-assignment z-rust">=</span> type_registry_arc<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">read</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> `serialize_ron` has been renamed to `serialize`, and now takes a reference to `TypeRegistry`.
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> serialized_scene <span class="z-keyword z-operator z-assignment z-rust">=</span> scene<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">serialize</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>type_registry</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="rename-camera3dbundle-dither-to-deband-dither"><a href="https://github.com/bevyengine/bevy/pull/11939">Rename <code>Camera3dBundle::dither</code> to <code>deband_dither</code></a>
<a class="anchor-link" href="#rename-camera3dbundle-dither-to-deband-dither">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>Camera3dBundle::dither</code> has been renamed to <code>deband_dither</code> to make it consistent with <code>Camera2dBundle</code>. If you construct or access this field, you will have to update your usage.</p>
<h3 id="rename-affine-to-square-to-affine3-to-square"><a href="https://github.com/bevyengine/bevy/pull/11904">Rename <code>affine_to_square()</code> to <code>affine3_to_square()</code></a>
<a class="anchor-link" href="#rename-affine-to-square-to-affine3-to-square">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>The <code>affine_to_square()</code> <strong>shader</strong> function has been renamed to <code>affine3_to_square</code>, in order to give room for <code>affine2_to_square</code>. Please update your import statements and usages accordingly. (Note that this is not Rust, but instead WGSL.)</p>
<pre data-lang="wgsl" class="language-wgsl z-code"><code class="language-wgsl" data-lang="wgsl"><span class="z-text z-plain">// 0.13
</span><span class="z-text z-plain">#import bevy_render::maths::affine_to_square
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">// 0.14
</span><span class="z-text z-plain">#import bevy_render::maths::affine3_to_square
</span></code></pre>
<h3 id="move-alphamode-into-bevy-render"><a href="https://github.com/bevyengine/bevy/pull/12012">Move <code>AlphaMode</code> into <code>bevy::render</code></a>
<a class="anchor-link" href="#move-alphamode-into-bevy-render">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>AlphaMode</code> has been moved from <code>bevy::pbr</code> to <code>bevy::render</code>. If you import them directly, you will need to update your import statements.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">pbr<span class="z-punctuation z-accessor z-rust">::</span></span>AlphaMode<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">render<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">alpha<span class="z-punctuation z-accessor z-rust">::</span></span>AlphaMode<span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="use-uvec2-when-working-with-texture-dimensions"><a href="https://github.com/bevyengine/bevy/pull/11698">Use <code>UVec2</code> when working with texture dimensions</a>
<a class="anchor-link" href="#use-uvec2-when-working-with-texture-dimensions">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>GpuImage</code>, <code>TextureAtlasLayout</code>, <code>TextureAtlasBuilder</code>, <code>DynamicAtlasTextureBuilder</code>, and <code>FontAtlas</code> have been changed to store their dimensions in integers rather than floating point numbers, in order to increase consistency with the underlying texture data. Instances of <code>Vec2</code> and <code>Rect</code> have been replaced with <code>UVec2</code> and <code>URect</code>.</p>
<p>Migrating this is tricky because the conversion from <code>f32</code> to <code>u32</code> is lossy. If you work with constants, you can simply rewrite the code. If you work with user input, you could choose to simply discard the decimal (<code>1.4 as u32</code>) or round it first (<code>1.83.round() as u32</code>).</p>
<h3 id="fix-cameraprojectionplugin-not-implementing-plugin-in-some-cases"><a href="https://github.com/bevyengine/bevy/pull/11766">Fix <code>CameraProjectionPlugin</code> not implementing <code>Plugin</code> in some cases</a>
<a class="anchor-link" href="#fix-cameraprojectionplugin-not-implementing-plugin-in-some-cases">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>There was a bug with <code>CameraProjectionPlugin&lt;T&gt;</code> where it would sometimes not implement <code>Plugin</code> if <code>T</code> did not implement <code>Component</code> and <code>GetTypeRegistration</code>. This has now been fixed by requiring <code>T: CameraProjection + Component + GetTypeRegistration</code>.</p>
<h3 id="replace-random1d-with-rand-f-shader-function"><a href="https://github.com/bevyengine/bevy/pull/11956">Replace <code>random1D()</code> with <code>rand_f()</code> shader function</a>
<a class="anchor-link" href="#replace-random1d-with-rand-f-shader-function">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>The <code>bevy_pbr::utils::random1D()</code> <strong>shader</strong> function has been replaced by the similar <code>bevy_pbr::utils::rand_f()</code>. Note that if you convert the returned <code>f32</code> to a different data type, you may be interested in <code>rand_u()</code> which returns a <code>u32</code> and <code>rand_vec2f()</code> which returns a <code>vec2&lt;f32&gt;</code>.</p>
<h3 id="intern-mesh-vertex-buffer-layouts"><a href="https://github.com/bevyengine/bevy/pull/12216">Intern mesh vertex buffer layouts</a>
<a class="anchor-link" href="#intern-mesh-vertex-buffer-layouts">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>Duplicate <code>MeshVertexBufferLayout</code>s are now combined into a single object, <code>MeshVertexBufferLayoutRef</code>, which contains an atomically-reference-counted (<code>Arc</code>) pointer to the layout. By interning these layouts, the results of <code>PartialEq</code> can be cached, resulting in a speedup in rendering. Code that was using <code>MeshVertexBufferLayout</code> may need to be updated to use <code>MeshVertexBufferLayoutRef</code> instead.</p>
<h3 id="make-gpuarraybufferindex-index-a-u32"><a href="https://github.com/bevyengine/bevy/pull/12250">Make <code>GpuArrayBufferIndex::index</code> a u32</a>
<a class="anchor-link" href="#make-gpuarraybufferindex-index-a-u32">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>GpuArrayBufferIndex::index</code> is now a <code>u32</code> instead of a <code>NonMaxU32</code>, since restricting the number isn't necessary anymore. Please update any usage to use <code>u32</code> instead.</p>
<h3 id="allow-disabling-shadows-through-materialplugin"><a href="https://github.com/bevyengine/bevy/pull/12538">Allow disabling shadows through <code>MaterialPlugin</code></a>
<a class="anchor-link" href="#allow-disabling-shadows-through-materialplugin">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>MaterialPlugin</code> now has a <code>shadows_enabled</code> property. If you manually constructed this plugin, you may need to set it. By default it is true, but you can disable shadows entirely by setting it to false.</p>
<h3 id="remove-spritepipeline-colored"><a href="https://github.com/bevyengine/bevy/pull/12559">Remove <code>SpritePipeline::COLORED</code></a>
<a class="anchor-link" href="#remove-spritepipeline-colored">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>The <code>COLORED</code> flag of <code>SpritePipelineKey</code> has been removed, since it is no longer used. In doing so, the raw values of <code>HDR</code>, <code>TONEMAP_IN_SHADER</code>, and <code>DEBAND_DITHER</code> have changed. If you are manually converting a <code>u32</code> into <code>SpritePipelineKey</code>, you may need to update it.</p>
<h3 id="sorted-and-binned-render-phase-items-resources-and-non-meshes"><a href="https://github.com/bevyengine/bevy/pull/12453">Sorted and binned render phase items, resources, and non-meshes</a>
<a class="anchor-link" href="#sorted-and-binned-render-phase-items-resources-and-non-meshes">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>Usage of <code>PhaseItem</code> has been split into <code>BinnedPhaseItem</code> and <code>SortedPhaseItem</code>. If you have custom <code>PhaseItem</code>s you will need to choose one of the new types. Notably some phases <em>must</em> be Sorted (such as Transparent and Transmissive), while others can be Binned. Effectively Sorted is &quot;what Bevy did before&quot; and Binned is new, and the point of this change is to avoid sorting when possible for improved performance.</p>
<p>If you're looking for a quick migration, consider picking <a href="https://docs.rs/bevy/0.14.0/bevy/render/render_phase/trait.SortedPhaseItem.html"><code>SortedPhaseItem</code></a> which requires the fewest code changes.</p>
<p>If you're looking for higher performance (and your phase doesn’t require sorting) you may want to pick <a href="https://docs.rs/bevy/0.14.0/bevy/render/render_phase/trait.BinnedPhaseItem.html"><code>BinnedPhaseItem</code></a>. Notably bins are populated based on <code>BinKey</code> and everything in the same bin is potentially batchable.</p>
<p>If you are only consuming these types, then a <code>Query</code> for a type like <code>&amp;mut RenderPhase&lt;Transparent2d&gt;</code> will become a <code>Resource</code> as such:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-storage z-modifier z-rust">mut</span> transparent_render_phases<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">ResMut<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-meta z-generic z-rust">ViewSortedRenderPhases<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>Transparent2d<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span>
</span></code></pre>
<p><code>ViewSortedRenderPhases</code> and <code>ViewBinnedRenderPhases</code> are used in accordance with which phase items you're trying to access (sorted or binned).</p>
<p>Examples of <a href="https://docs.rs/bevy/0.14.0/bevy/render/render_phase/trait.SortedPhaseItem.html#implementors"><code>SortedPhaseItems</code>s</a>:</p>
<ul>
<li>Transmissive3d</li>
<li>Transparent2d</li>
<li>Transparent3d</li>
<li>TransparentUi</li>
</ul>
<p>Examples of <a href="https://docs.rs/bevy/0.14.0/bevy/render/render_phase/trait.BinnedPhaseItem.html#implementors"><code>BinnedPhaseItem</code>s</a> include:</p>
<ul>
<li>Opaque3d</li>
<li>Opaque3dPrepass</li>
<li>Opaque3dDeferred</li>
<li>AlphaMask3d</li>
<li>AlphaMask3dPrepass</li>
<li>AlphaMask3dDeferred</li>
<li><a href="https://docs.rs/bevy/0.14.0/bevy/pbr/struct.Shadow.html">Shadow</a></li>
</ul>
<p>If you do not have a mesh (such as for GPU-driven particles or procedural generation) and want to use the new binned behavior, the <a href="https://docs.rs/bevy/0.14.0/bevy/render/render_phase/struct.BinnedRenderPhase.html"><code>BinnedRenderPhase</code></a> includes a <code>non_mesh_items</code> collection which correlates with the <a href="https://docs.rs/bevy/0.14.0/bevy/render/render_phase/struct.BinnedRenderPhase.html"><code>BinnedRenderPhaseType</code></a>. This type is used when <a href="https://docs.rs/bevy/0.14.0/bevy/render/render_phase/struct.BinnedRenderPhase.html#method.add">add</a>ing items to the <code>BinnedRenderPhase</code>.</p>
<p>It may be additionally useful to checkout the new <a href="https://github.com/bevyengine/bevy/blob/5876352206d1bcea792825bf013eb212383b73d6/examples/shader/custom_phase_item.rs">custom_phase_item example</a> which details some of the new APIs.</p>
<h3 id="gpu-frustum-culling"><a href="https://github.com/bevyengine/bevy/pull/12889">GPU frustum culling</a>
<a class="anchor-link" href="#gpu-frustum-culling">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>For <code>PhaseItem</code>s, the <code>dynamic_offset: Option&lt;NonMaxU32&gt;</code> field is now <code>extra_index: PhaseItemExtraIndex</code>, which wraps a <code>u32</code>. Instead of <code>None</code>, use <code>PhaseItemExtraIndex::NONE</code>.</p>
<p>This change affects <code>AlphaMask3d</code>, <code>AlphaMask3dDeferred</code>, <code>AlphaMask3dPrepass</code>, <code>Opaque2d</code>, <code>Opaque3dDeferred</code>, <code>Opaque3dPrepass</code>, <code>Shadow</code>, <code>Transmissive3d</code>, <code>Transparent2d</code>, <code>Transparent3d</code>, and <code>TransparentUi</code>.</p>
<h3 id="remove-deterministicrenderingconfig"><a href="https://github.com/bevyengine/bevy/pull/12811">Remove <code>DeterministicRenderingConfig</code></a>
<a class="anchor-link" href="#remove-deterministicrenderingconfig">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>DeterministicRenderingConfig</code> has been removed because its only property, <code>stable_sort_z_fighting</code>, is no longer needed. Z-fighting has been generally removed now that opaque items are binned instead of sorted.</p>
<h3 id="optimize-queue-material-meshes-and-remove-some-bit-manipulation"><a href="https://github.com/bevyengine/bevy/pull/12791">Optimize <code>queue_material_meshes</code> and remove some bit manipulation</a>
<a class="anchor-link" href="#optimize-queue-material-meshes-and-remove-some-bit-manipulation">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>The <code>primitive_topology</code> field on <code>GpuMesh</code> is now an getter method: <code>GpuMesh::primitive_topology()</code>.</p>
<p>For performance reasons, <code>MeshPipelineKey</code> has been split into <code>BaseMeshPipelineKey</code>, which lives in <code>bevy::render</code>, and <code>MeshPipelineKey</code>, which lives in <code>bevy::pbr</code>. These two may be combined with bitwise-or to produce the final <code>MeshPipelineKey</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> base_pipeline_key <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">BaseMeshPipelineKey<span class="z-punctuation z-accessor z-rust">::</span></span>all<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> pbr_pipeline_key <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">MeshPipelineKey<span class="z-punctuation z-accessor z-rust">::</span></span>all<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> pipeline_key<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">u64</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> base_pipeline_key<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">bits</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-bitwise z-rust">|</span> pbr_pipeline_key<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">bits</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="disable-ray-query-and-ray-tracing-acceleration-structure-by-default"><a href="https://github.com/bevyengine/bevy/pull/12862">Disable <code>RAY_QUERY</code> and <code>RAY_TRACING_ACCELERATION_STRUCTURE</code> by default</a>
<a class="anchor-link" href="#disable-ray-query-and-ray-tracing-acceleration-structure-by-default">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>The <code>RAY_QUERY</code> and <code>RAY_TRACING_ACCELERATION_STRUCTURE</code> <code>wgpu</code> features are now disabled by default, due to some users having their program crash while initializing. (The <code>wgpu</code> issue for this can be found <a href="https://github.com/gfx-rs/wgpu/issues/5488">here</a>.)</p>
<p>If you use these features, you will need to re-enable them through <code>WgpuSettings::features</code>:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> settings <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">WgpuSettings<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Enable `RAY_QUERY` and `RAY_TRACING_ACCELERATION_STRUCTURE`, along with the defaults.
</span></span><span class="z-source z-rust">settings<span class="z-punctuation z-accessor z-dot z-rust">.</span>features <span class="z-keyword z-operator z-assignment z-rust">|=</span> <span class="z-meta z-path z-rust">WgpuFeatures<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">RAY_QUERY</span> <span class="z-keyword z-operator z-bitwise z-rust">|</span> <span class="z-meta z-path z-rust">WgpuFeatures<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">RAY_TRACING_ACCELERATION_STRUCTURE</span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>DefaultPlugins<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">set</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>RenderPlugin <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        render_creation<span class="z-punctuation z-separator z-rust">:</span> settings<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre>
<p>Note that <code>WgpuSettings::default()</code> automatically configures good default flags for Bevy, while <code>WgpuFeatures::default()</code> is the equivalent of <code>WgpuFeatures::empty()</code>.</p>
<h3 id="upload-previous-frame-s-inverse-view-to-gpu"><a href="https://github.com/bevyengine/bevy/pull/12902">Upload previous frame's <code>inverse_view</code> to GPU</a>
<a class="anchor-link" href="#upload-previous-frame-s-inverse-view-to-gpu">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>PreviousViewProjection</code> has been renamed to <code>PreviousViewData</code> and <code>PreviousViewProjectionUniformOffset</code> has been renamed to <code>PreviousViewUniformOffset</code>. Additionally, a few systems have been renamed:</p>
<ul>
<li><code>update_previous_view_projections</code> to <code>update_previous_view_data</code></li>
<li><code>extract_camera_previous_view_projection</code> to <code>extract_camera_previous_view_data</code></li>
<li><code>prepare_previous_view_projection_uniforms</code> to <code>prepare_previous_view_uniforms</code></li>
</ul>
<h3 id="generate-meshuniforms-on-the-gpu-when-available"><a href="https://github.com/bevyengine/bevy/pull/12773">Generate <code>MeshUniform</code>s on the GPU when available.</a>
<a class="anchor-link" href="#generate-meshuniforms-on-the-gpu-when-available">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>Custom render phases now need multiple systems beyond just <code>batch_and_prepare_render_phase</code>. Code that was previously creating custom render phases should now add a <code>BinnedRenderPhasePlugin</code> or <code>SortedRenderPhasePlugin</code> as appropriate, instead of directly adding <code>batch_and_prepare_render_phase</code>.</p>
<h3 id="add-texture-coord-flipping-to-standardmaterial"><a href="https://github.com/bevyengine/bevy/pull/12917">Add texture coord flipping to <code>StandardMaterial</code></a>
<a class="anchor-link" href="#add-texture-coord-flipping-to-standardmaterial">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>Quad</code> was deprecated in 0.13, though its replacement <code>Rectangle</code> did not provide a clear replacement for <code>Quad::flip</code>. This has been amended: now you can call <code>flip()</code> on any <code>StandardMaterial</code>.</p>
<p>Please note that <code>Quad::flip</code> was specifically <em>horizontal</em> flipping, though <code>StandardMaterial::flip()</code> supports both <em>vertical</em> and <em>horizontal</em> flipping.</p>
<h3 id="rename-shadowfilteringmethod-s-castano13-and-jimenez14-variants"><a href="https://github.com/bevyengine/bevy/pull/12910">Rename <code>ShadowFilteringMethod</code>'s <code>Castano13</code> and <code>Jimenez14</code> variants</a>
<a class="anchor-link" href="#rename-shadowfilteringmethod-s-castano13-and-jimenez14-variants">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>ShadowFilteringMethod::Castano13</code> and <code>ShadowFilteringMethod::Jimenez14</code> have been renamed to <code>Gaussian</code> and <code>Temporal</code> respectively to leave room for expansion in the future, though the corresponding authors are still credited in the documentation.</p>
<h3 id="store-lists-of-visibleentities-separately"><a href="https://github.com/bevyengine/bevy/pull/12582">Store lists of <code>VisibleEntities</code> separately</a>
<a class="anchor-link" href="#store-lists-of-visibleentities-separately">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>check_visibility()</code> and <code>VisibleEntities</code> now store the four types of renderable entities–-2D meshes, 3D meshes, lights, and UI elements-–separately. If your custom rendering code examines <code>VisibleEntities</code>, it will now need to specify which type of entity it’s interested in using the <code>WithMesh2d</code>, <code>WithMesh</code>, <code>WithLight</code>, and <code>WithNode</code> types respectively. If your app introduces a new type of renderable entity, you’ll need to add an instance of the <code>check_visibility</code> system with the appropriate query filter to the main world schedule to accommodate your new component or components. For example:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyCustomRenderable</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>DefaultPlugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">        PostUpdate<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">check_visibility<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-meta z-generic z-rust">With<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>MyCustomRenderable<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">            <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">in_set</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">VisibilitySystems<span class="z-punctuation z-accessor z-rust">::</span></span>CheckVisibility</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    </span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="make-text-require-spritesource"><a href="https://github.com/bevyengine/bevy/pull/12945">Make <code>Text</code> require <code>SpriteSource</code></a>
<a class="anchor-link" href="#make-text-require-spritesource">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>Text</code> now requires a <code>SpriteSource</code> marker component in order to render. This component has been added to <code>Text2dBundle</code> and may need to be specified if <code>..default()</code> isn't used.</p>
<h3 id="expose-desired-maximum-frame-latency"><a href="https://github.com/bevyengine/bevy/pull/12954">Expose <code>desired_maximum_frame_latency</code></a>
<a class="anchor-link" href="#expose-desired-maximum-frame-latency">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>The <code>desired_maximum_frame_latency</code> field has been added to <code>Window</code> and <code>ExtractedWindow</code>. It is an <code>Option&lt;NonZero&lt;u32&gt;&gt;</code> that hints the maximum number of queued frames allowed on the GPU. Higher values may result in smoother frames and avoids freezes due to CPU-GPU data upload, but all at the cost of higher input latency. Setting <code>desired_maximum_frame_latency</code> to <code>None</code> will make it fall back to the default value, which is currently 2.</p>
<h3 id="merge-visibilitysystems-frusta-variants"><a href="https://github.com/bevyengine/bevy/pull/11808">Merge <code>VisibilitySystems</code> frusta variants</a>
<a class="anchor-link" href="#merge-visibilitysystems-frusta-variants">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>VisibilitySystems</code>'s <code>UpdateOrthographicFrusta</code>, <code>UpdatePerspectiveFrusta</code>, and <code>UpdateProjectionFrusta</code> variants have been removed in favor of the new <code>VisibilitySystems::UpdateFrusta</code> variant.</p>
<h3 id="expand-color-grading"><a href="https://github.com/bevyengine/bevy/pull/13121">Expand color grading</a>
<a class="anchor-link" href="#expand-color-grading">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>The <code>ColorGrading</code> component has been expanded to support individually configuring the shadow, midtone, and highlight sections. If you configured the <code>gamma</code> or <code>pre_saturation</code> fields previously, you will now have to set them for all sections:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color_grading <span class="z-keyword z-operator z-assignment z-rust">=</span> ColorGrading <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    gamma<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">2.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    pre_saturation<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">8</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> color_grading <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">ColorGrading<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">for</span> section <span class="z-keyword z-operator z-rust">in</span> color_grading<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">all_sections_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    section<span class="z-punctuation z-accessor z-dot z-rust">.</span>gamma <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-numeric z-float z-rust">2.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> `pre_saturation` has been renamed to `saturation`.
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    section<span class="z-punctuation z-accessor z-dot z-rust">.</span>saturation <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">8</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre>
<p>Additionally, the <code>post_saturation</code> and <code>exposure</code> fields have been moved specifically to the new <code>global</code> field, which is a <code>ColorGradingGlobal</code> that supports more operations for the image as a whole.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color_grading <span class="z-keyword z-operator z-assignment z-rust">=</span> ColorGrading <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    post_saturation<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">2</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    exposure<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">4</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color_grading <span class="z-keyword z-operator z-assignment z-rust">=</span> ColorGrading <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    global<span class="z-punctuation z-separator z-rust">:</span> ColorGradingGlobal <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        post_saturation<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">2</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        exposure<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">4</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="rename-buffervec-to-rawbuffervec"><a href="https://github.com/bevyengine/bevy/pull/13199">Rename <code>BufferVec</code> to <code>RawBufferVec</code></a>
<a class="anchor-link" href="#rename-buffervec-to-rawbuffervec">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>BufferVec</code> has been renamed to <code>RawBufferVec</code> because a new implementation of <code>BufferVec</code> has taken its name. The new <code>BufferVec&lt;T&gt;</code> no longer requires <code>T: Pod</code>, but instead <code>ShaderType</code> from the <code>encase</code> library.</p>
<p>For most cases you can simply switch to using <code>RawBufferVec</code>, but if you have more complex data you may be interested in the new <code>BufferVec</code> implementation.</p>
<h3 id="implement-clearcoat"><a href="https://github.com/bevyengine/bevy/pull/13031">Implement clearcoat</a>
<a class="anchor-link" href="#implement-clearcoat">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>The lighting functions in the <code>pbr_lighting</code> WGSL module now have clearcoat parameters if <code>STANDARD_MATERIAL_CLEARCOAT</code> is defined. Additionally, the <code>R</code> reflection vector parameter has been removed from some lighting functions, as it was unused.</p>
<h3 id="split-node2d-mainpass"><a href="https://github.com/bevyengine/bevy/pull/12982">Split <code>Node2d::MainPass</code></a>
<a class="anchor-link" href="#split-node2d-mainpass">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>Node2d::MainPass</code> has been split into 3 separate phases: <code>StartMainPass</code>, <code>MainTransparentPass</code>, and <code>EndMainPass</code>. If you previously used <code>MainPass</code> to order your own custom nodes, you now need to order them relative to <code>StartMainPass</code> and <code>EndMainPass</code>.</p>
<h3 id="remove-limit-on-renderlayers"><a href="https://github.com/bevyengine/bevy/pull/13317">Remove limit on <code>RenderLayers</code></a>
<a class="anchor-link" href="#remove-limit-on-renderlayers">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>There is no longer a limit on the total amount of <code>RenderLayers</code>, and so the <code>TOTAL_LAYERS</code> associated constant and <code>all()</code> constructor have been removed. Entities expecting to be visible on all layers, such as lights, should either create a constant listing all known layers used by the application or compute the active layers that are in use at runtime.</p>
<p>The <code>Copy</code> trait is no longer implemented on <code>RenderLayers</code>. Instead you should use the <code>.clone()</code> function from the <code>Clone</code> trait which <code>Renderlayers</code> still implements.</p>
<h3 id="fix-astronomic-emissive-colors-required-for-bloom"><a href="https://github.com/bevyengine/bevy/pull/13350">Fix astronomic emissive colors required for bloom</a>
<a class="anchor-link" href="#fix-astronomic-emissive-colors-required-for-bloom">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>Emissive color and camera exposure now play nicely with each other. Before, the <code>emissive</code> property of a <code>StandardMaterial</code> had to be massive (in the thousands) in order for effects such as bloom to be visible. This has been scaled down, so you may have to re-adjust your emissive colors.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">StandardMaterial <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    emissive<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span>linear_rgb<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">23000.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">9000.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">3000.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust">StandardMaterial <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Much more reasonable! :)
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    emissive<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span>linear_rgb<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">13.</span><span class="z-constant z-numeric z-float z-rust">99</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">5.</span><span class="z-constant z-numeric z-float z-rust">32</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">2.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre>
<p>You may also be interested in the <code>StandardMaterial::emissive_exposure_weight</code> property.</p>
<h3 id="more-idiomatic-textureatlasbuilder"><a href="https://github.com/bevyengine/bevy/pull/13238">More idiomatic <code>TextureAtlasBuilder</code></a>
<a class="anchor-link" href="#more-idiomatic-textureatlasbuilder">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>TextureAtlasBuilder</code> has been modified to be more consistent with other builders. As part of this, most methods now return <code>&amp;mut Self</code> instead of <code>Self</code> and <code>finish()</code> has been renamed to <code>build()</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>texture_atlas_layout<span class="z-punctuation z-separator z-rust">,</span> texture</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">TextureAtlasBuilder<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">padding</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">UVec2<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">format</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">TextureFormat<span class="z-punctuation z-accessor z-rust">::</span></span>bevy_default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">finish</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>texture_atlas_layout<span class="z-punctuation z-separator z-rust">,</span> texture</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">TextureAtlasBuilder<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">padding</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">UVec2<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">format</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">TextureFormat<span class="z-punctuation z-accessor z-rust">::</span></span>bevy_default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">build</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> This is now `build()`.
</span></span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="normalise-matrix-naming"><a href="https://github.com/bevyengine/bevy/pull/13489">Normalise matrix naming</a>
<a class="anchor-link" href="#normalise-matrix-naming">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>All matrices have been renamed to follow the convention <code>x_from_y</code> in order to decrease confusion while increasing readability.</p>
<ul>
<li><code>Frustum</code>'s <code>from_view_projection</code>, <code>from_view_projection_custom_far</code> and <code>from_view_projection_no_far</code> methods were renamed to <code>from_clip_from_world</code>, <code>from_clip_from_world_custom_far</code> and <code>from_clip_from_world_no_far</code>.</li>
<li><code>ComputedCameraValues::projection_matrix</code> was renamed to <code>clip_from_view</code>.</li>
<li><code>CameraProjection::get_projection_matrix</code> was renamed to <code>get_clip_from_view</code> (this affects implementations on <code>Projection</code>, <code>PerspectiveProjection</code> and <code>OrthographicProjection</code>).</li>
<li><code>ViewRangefinder3d::from_view_matrix</code> was renamed to <code>from_world_from_view</code>.</li>
<li><code>PreviousViewData</code>'s members were renamed to <code>view_from_world</code> and <code>clip_from_world</code>.</li>
<li><code>ExtractedView</code>'s <code>projection</code>, <code>transform</code> and <code>view_projection</code> were renamed to <code>clip_from_view</code>, <code>world_from_view</code> and <code>clip_from_world</code>.</li>
<li><code>ViewUniform</code>'s <code>view_proj</code>, <code>unjittered_view_proj</code>, <code>inverse_view_proj</code>, <code>view</code>, <code>inverse_view</code>, <code>projection</code> and <code>inverse_projection</code> were renamed to <code>clip_from_world</code>, <code>unjittered_clip_from_world</code>, <code>world_from_clip</code>, <code>world_from_view</code>, <code>view_from_world</code>, <code>clip_from_view</code> and <code>view_from_clip</code>.</li>
<li><code>GpuDirectionalCascade::view_projection</code> was renamed to <code>clip_from_world</code>.</li>
<li><code>MeshTransforms</code>' <code>transform</code> and <code>previous_transform</code> were renamed to <code>world_from_local</code> and <code>previous_world_from_local</code>.</li>
<li><code>MeshUniform</code>'s <code>transform</code>, <code>previous_transform</code>, <code>inverse_transpose_model_a</code> and <code>inverse_transpose_model_b</code> were renamed to <code>world_from_local</code>, <code>previous_world_from_local</code>, <code>local_from_world_transpose_a</code> and <code>local_from_world_transpose_b</code> (the <code>Mesh</code> type in WGSL mirrors this, however <code>transform</code> and <code>previous_transform</code> were named <code>model</code> and <code>previous_model</code>).</li>
<li><code>Mesh2dTransforms::transform</code> was renamed to <code>world_from_local</code>.</li>
<li><code>Mesh2dUniform</code>'s <code>transform</code>, <code>inverse_transpose_model_a</code> and <code>inverse_transpose_model_b</code> were renamed to <code>world_from_local</code>, <code>local_from_world_transpose_a</code> and <code>local_from_world_transpose_b</code> (the <code>Mesh2d</code> type in WGSL mirrors this).</li>
<li>In WGSL, <code>bevy_pbr::mesh_functions</code>, <code>get_model_matrix</code> and <code>get_previous_model_matrix</code> were renamed to <code>get_world_from_local</code> and <code>get_previous_world_from_local</code>.</li>
<li>In WGSL, <code>bevy_sprite::mesh2d_functions::get_model_matrix</code> was renamed to <code>get_world_from_local</code>.</li>
</ul>
<h3 id="rename-point-light-to-clusterable-object-in-cluster-contexts"><a href="https://github.com/bevyengine/bevy/pull/13654">Rename &quot;point light&quot; to &quot;clusterable object&quot; in cluster contexts</a>
<a class="anchor-link" href="#rename-point-light-to-clusterable-object-in-cluster-contexts">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>In the PBR shaders, <code>point_lights</code> is now known as <code>clusterable_objects</code>, <code>PointLight</code> is now known as <code>ClusterableObject</code>, and <code>cluster_light_index_lists</code> is now known as <code>clusterable_object_index_lists</code>. This rename generalizes over clusterable objects, which adds room for light probes and decals in the future.</p>
<h3 id="make-mesh-merge-take-a-reference-of-mesh"><a href="https://github.com/bevyengine/bevy/pull/13710">Make <code>Mesh::merge()</code> take a reference of <code>Mesh</code></a>
<a class="anchor-link" href="#make-mesh-merge-take-a-reference-of-mesh">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>Mesh::merge()</code> now takes <code>&amp;Mesh</code> instead of <code>Mesh</code>. Because of this, you can now share the same <code>Mesh</code> across multiple <code>merge()</code> calls without cloning it.</p>
<h3 id="store-clearcolorconfig-instead-of-loadop-color-in-cameraoutputmode"><a href="https://github.com/bevyengine/bevy/pull/13419">Store <code>ClearColorConfig</code> instead of <code>LoadOp&lt;Color&gt;</code> in <code>CameraOutputMode</code></a>
<a class="anchor-link" href="#store-clearcolorconfig-instead-of-loadop-color-in-cameraoutputmode">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>CameraOutputMode::Write</code> now stores a <code>ClearColorConfig</code> instead of a <code>LoadOp&lt;Color&gt;</code>. Use the following table to convert between the two enums:</p>
<table><thead><tr><th><code>LoadOp&lt;Color&gt;</code></th><th><code>ClearColorConfig</code></th></tr></thead><tbody>
<tr><td><code>Clear(color)</code></td><td><code>Custom(color)</code></td></tr>
<tr><td><code>Load</code></td><td><code>None</code></td></tr>
</tbody></table>
<p><code>ClearColorConfig</code> has an additional variant, <code>Default</code>, which inherits the clear color from the <code>ClearColor</code> resource.</p>
<h3 id="wgpu-0-20"><a href="https://github.com/bevyengine/bevy/pull/13186"><code>wgpu</code> 0.20</a>
<a class="anchor-link" href="#wgpu-0-20">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>Bevy now depends on <code>wgpu</code> 0.20, <code>naga</code> 0.20, and <code>naga_oil</code> 0.14. If you manually specify any of these crates in your <code>Cargo.toml</code>, make sure to update their versions to prevent them from being duplicated.</p>
<p>Furthermore, timestamps inside of encoders are now disallowed on WebGPU (though they still work on native). Use the <code>TIMESTAMP_QUERY_INSIDE_ENCODERS</code> feature to check for support.</p>
<h3 id="deprecate-spritesheetbundle-and-atlasimagebundle"><a href="https://github.com/bevyengine/bevy/pull/12218">Deprecate <code>SpriteSheetBundle</code> and <code>AtlasImageBundle</code></a>
<a class="anchor-link" href="#deprecate-spritesheetbundle-and-atlasimagebundle">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
<div class="migration-guide-area-tag">UI</div>
</div>
<p><code>SpriteSheetBundle</code> has been deprecated as part of a style and maintenance-motivated move towards optional components that add functionality, rather than a proliferation of bundles. Insert the <code>TextureAtlas</code> component alongside a <code>SpriteBundle</code> instead.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>SpriteSheetBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    texture<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    atlas<span class="z-punctuation z-separator z-rust">:</span> TextureAtlas <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        layout<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    SpriteBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        texture<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    TextureAtlas <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        layout<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p><code>AtlasImageBundle</code> has been deprecated. Insert the <code>TextureAtlas</code> component alongside an <code>ImageBundle</code> instead.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>AtlasImageBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    image<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    atlas<span class="z-punctuation z-separator z-rust">:</span> TextureAtlas <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        layout<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    ImageBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        image<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    TextureAtlas <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        layout<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="decouple-backgroundcolor-from-uiimage"><a href="https://github.com/bevyengine/bevy/pull/11165">Decouple <code>BackgroundColor</code> from <code>UiImage</code></a>
<a class="anchor-link" href="#decouple-backgroundcolor-from-uiimage">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
<div class="migration-guide-area-tag">UI</div>
</div>
<p>The <a href="https://docs.rs/bevy/0.14.0/bevy/prelude/struct.BackgroundColor.html"><code>BackgroundColor</code></a> component now renders a solid-color background behind <a href="https://docs.rs/bevy/0.14.0/bevy/prelude/struct.UiImage.html#structfield.color"><code>UiImage</code></a> instead of tinting its color. Use the <code>color</code> field of <code>UiImage</code> for tinting.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">ButtonBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    image<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">UiImage<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>my_texture</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    background_color<span class="z-punctuation z-separator z-rust">:</span> my_color_tint<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust">ButtonBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    image<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">UiImage<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>my_texture</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">with_color</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>my_color_tint</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre>
<p>Some UI systems have been split or renamed.</p>
<ul>
<li><code>bevy_ui::RenderUiSystem::ExtractNode</code> has been split into <code>ExtractBackgrounds</code>, <code>ExtractImages</code>, <code>ExtractBorders</code>, and <code>ExtractText</code>.</li>
<li><code>bevy_ui::extract_uinodes</code> has been split into <code>extract_uinode_background_colors</code> and <code>extract_uinode_images</code>.</li>
<li><code>bevy_ui::extract_text_uinodes</code> has been renamed to <code>extract_uinode_text</code>.</li>
</ul>
<h3 id="remove-generic-camera-from-extract-default-ui-camera-view-system"><a href="https://github.com/bevyengine/bevy/pull/13462">Remove generic camera from <code>extract_default_ui_camera_view()</code> system</a>
<a class="anchor-link" href="#remove-generic-camera-from-extract-default-ui-camera-view-system">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
<div class="migration-guide-area-tag">UI</div>
</div>
<p>The <code>bevy::ui::render::extract_default_ui_camera_view()</code> system is now hard-wired to both the <code>Camera2d</code> and <code>Camera3d</code> components, and is no longer added twice for each type.</p>
<p>This change was made to fix a bug introduced after moving render phases to resources. The first thing this system does is clear out all entities from the previous frame. By having two separate systems, one was always clearing out the other, causing some entities to not be rendered.</p>
<h3 id="rename-need-new-surfaces-system-to-need-surface-configuration"><a href="https://github.com/bevyengine/bevy/pull/12055">Rename <code>need_new_surfaces()</code> system to <code>need_surface_configuration()</code></a>
<a class="anchor-link" href="#rename-need-new-surfaces-system-to-need-surface-configuration">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
<div class="migration-guide-area-tag">Windowing</div>
</div>
<p>The <code>need_new_surfaces()</code> system has been renamed <code>need_surface_configuration()</code> as part of a bug fix where Bevy apps would crash on iOS when the screen orientation was changed.</p>
<h3 id="require-windowing-backends-to-store-windows-in-windowwrapper"><a href="https://github.com/bevyengine/bevy/pull/12978">Require windowing backends to store windows in <code>WindowWrapper</code></a>
<a class="anchor-link" href="#require-windowing-backends-to-store-windows-in-windowwrapper">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
<div class="migration-guide-area-tag">Windowing</div>
</div>
<p>Windowing backends now need to store their window in the new <code>WindowWrapper</code>, so that Bevy can control when it is dropped. This fixes a number of bugs and crashes related to the window being dropped before the pipelined renderer is finished drawing to it.</p>
<h3 id="add-an-index-argument-to-parallel-iteration-helpers"><a href="https://github.com/bevyengine/bevy/pull/12169">Add an index argument to parallel iteration helpers</a>
<a class="anchor-link" href="#add-an-index-argument-to-parallel-iteration-helpers">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Tasks</div>
</div>
<p>Closures passed as arguments to <code>par_chunk_map()</code>, <code>par_splat_map()</code>, <code>par_chunk_map_mut()</code>, and <code>par_splat_map_mut()</code> now take an additional index argument specifying which part of the slice is being processed.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">items<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">par_chunk_map</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>task_pool<span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">100</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">chunk</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust">items<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">par_chunk_map</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>task_pool<span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">100</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">_index</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-variable z-parameter z-rust">chunk</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="fix-spawning-nodebundle-destroying-previous-ones"><a href="https://github.com/bevyengine/bevy/pull/12698">Fix spawning <code>NodeBundle</code> destroying previous ones</a>
<a class="anchor-link" href="#fix-spawning-nodebundle-destroying-previous-ones">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">UI</div>
</div>
<p>There was a regression in 0.13.1 <code>NodeBundle</code>s to destroy previous ones when spawned, and the original workaround was to add <code>position_type: Absolute</code> to all of the root nodes. This bug is now fixed, so you can remove the workaround.</p>
<h3 id="rename-rect-inset-to-inflate"><a href="https://github.com/bevyengine/bevy/pull/13452">Rename <code>Rect::inset()</code> to <code>inflate()</code></a>
<a class="anchor-link" href="#rename-rect-inset-to-inflate">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">UI</div>
</div>
<p><code>Rect::inset()</code>, <code>IRect::inset()</code>, and <code>URect::inset()</code> have been renamed to <code>inflate()</code> to fit the actual behavior.</p>
<h3 id="updates-default-font-size-to-24px"><a href="https://github.com/bevyengine/bevy/pull/13603">Updates default font size to 24px</a>
<a class="anchor-link" href="#updates-default-font-size-to-24px">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">UI</div>
</div>
<p>The default font size for <code>TextStyle</code> has been increased from 12px to 24px. If you preferred the original size, you can override it using the <code>TextStyle::font_size</code> property.</p>
<h3 id="disentangle-bevy-utils-bevy-core-s-re-exported-crates"><a href="https://github.com/bevyengine/bevy/pull/12313">Disentangle <code>bevy::utils</code> / <code>bevy::core</code>'s re-exported crates</a>
<a class="anchor-link" href="#disentangle-bevy-utils-bevy-core-s-re-exported-crates">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Utils</div>
</div>
<p><code>bevy::utils</code> no longer re-exports <code>petgraph</code>, <code>uuid</code>, <code>nonmax</code>, <code>smallvec</code>, or <code>thiserror</code>. Additionally, <code>bevy::core</code> no longer re-exports <code>bytemuck</code>'s <code>bytes_of</code>, <code>cast_slice</code>, <code>Pod</code>, and <code>Zeroable</code>.</p>
<p>If you need any of these as dependencies, you can add them to your own <code>Cargo.toml</code>.</p>
<h3 id="re-add-window-fit-canvas-to-parent"><a href="https://github.com/bevyengine/bevy/pull/11278">Re-add <code>Window::fit_canvas_to_parent</code></a>
<a class="anchor-link" href="#re-add-window-fit-canvas-to-parent">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Windowing</div>
</div>
<p><code>Window::fit_canvas_to_parent</code> is a property on WASM that automatically resizes the canvas element to the size of its parent, usually the screen. It was removed in 0.13, but that ended up being problematic because many users depended on its behavior when they could not customize the CSS. It has now been re-added to account for this need.</p>
<h3 id="remove-window-from-winitwindows-when-it-is-closed"><a href="https://github.com/bevyengine/bevy/pull/12749">Remove window from <code>WinitWindows</code> when it is closed</a>
<a class="anchor-link" href="#remove-window-from-winitwindows-when-it-is-closed">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Windowing</div>
</div>
<p><code>WinitWindows::get_window_entity</code> now returns <code>None</code> after a window is closed, instead of an entity that no longer exists.</p>
<h3 id="make-window-close-the-frame-after-it-is-requested"><a href="https://github.com/bevyengine/bevy/pull/13236">Make window close the frame after it is requested</a>
<a class="anchor-link" href="#make-window-close-the-frame-after-it-is-requested">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Windowing</div>
</div>
<p>Windows now close a frame after their exit has been requested in order to fix several regressions. If you have custom exit logic, ensure that it does not rely on the app exiting the same frame the window is closed.</p>
<h3 id="upgrade-to-winit-0-30"><a href="https://github.com/bevyengine/bevy/pull/13366">Upgrade to <code>winit</code> 0.30</a>
<a class="anchor-link" href="#upgrade-to-winit-0-30">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Windowing</div>
</div>
<p>The custom UserEvent is now renamed as WakeUp, used to wake up the loop if anything happens outside the app (a new <a href="https://github.com/bevyengine/bevy/pull/13366/files#diff-2de8c0a8d3028d0059a3d80ae31b2bbc1cde2595ce2d317ea378fe3e0cf6ef2d">custom_user_event</a> shows this behavior.</p>
<p>The internal <code>UpdateState</code> has been removed and replaced internally by the AppLifecycle. When changed, the AppLifecycle is sent as an event.</p>
<p>The <code>UpdateMode</code> now accepts only two values: <code>Continuous</code> and <code>Reactive</code>, but the latter exposes 3 new properties to enable reactive to device, user or window events. The previous <code>UpdateMode::Reactive</code> is now equivalent to <code>UpdateMode::reactive()</code>, while <code>UpdateMode::ReactiveLowPower</code> to <code>UpdateMode::reactive_low_power()</code>.</p>
<p>The <code>ApplicationLifecycle</code> has been renamed as <code>AppLifecycle</code>, and now contains the possible values of the application state inside the event loop: </p>
<ul>
<li><code>Idle</code>: the loop has not started yet</li>
<li><code>Running</code> (previously called <code>Started</code>): the loop is running</li>
<li><code>WillSuspend</code>: the loop is going to be suspended</li>
<li><code>Suspended</code>: the loop is suspended</li>
<li><code>WillResume</code>: the loop is going to be resumed</li>
</ul>
<p>Note: the <code>Resumed</code> state has been removed since the resumed app is just running.</p>
<p>Finally, now that <code>winit</code> enables this, it extends the <code>WinitPlugin</code> to support custom events.</p>
<h3 id="separating-finite-and-infinite-3d-planes"><a href="https://github.com/bevyengine/bevy/pull/12426">Separating Finite and Infinite 3d Planes</a>
<a class="anchor-link" href="#separating-finite-and-infinite-3d-planes">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>The <code>Plane3d</code> primitive is now a finite plane with a <code>half_size</code> field. If you want an infinite plane, use the new <code>InfinitePlane3d</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> plane <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Plane3d<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>Y</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> plane <span class="z-keyword z-operator z-assignment z-rust">=</span> Plane3d <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    normal<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Dir3<span class="z-punctuation z-accessor z-rust">::</span></span>Y<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    half_size<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Vec2<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">10.</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">10.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> plane <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">InfinitePlane3d<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>Y</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="contextually-clearing-gizmos"><a href="https://github.com/bevyengine/bevy/pull/10973">Contextually clearing gizmos</a>
<a class="anchor-link" href="#contextually-clearing-gizmos">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Gizmos</div>
</div>
<p><code>App::insert_gizmo_group()</code> function is now named <code>App::insert_gizmo_config()</code>.</p>
</div>

        
      </div>
      <div class="docs-footer print:hidden">
        <nav class="docs-footer__nav">
          
            <a class="docs-footer__link docs-footer__link--next"
                href="&#x2F;learn&#x2F;migration-guides&#x2F;0-12-to-0-13&#x2F;"
                data-docs-nav-next>
              <div class="docs-footer__label">
                <div class="docs-footer__dir">Next</div>
                0.12 to 0.13
              </div>
              <i class="docs-footer__chevron icon icon--chevron-right"></i>
            </a>
          
          
            <a class="docs-footer__link docs-footer__link--prev"
                href="&#x2F;learn&#x2F;migration-guides&#x2F;introduction&#x2F;"
                data-docs-nav-previous>
              <div class="docs-footer__label">
                <div class="docs-footer__dir">Previous</div>
                Introduction
              </div>
              <i class="docs-footer__chevron icon icon--chevron-left"></i>
            </a>
          
        </nav>
        <div class="docs-footer__edit-wrapper">
          <a class="docs-footer__edit"
              href="https://github.com/bevyengine/bevy-website/edit/main/content/learn&#x2F;migration-guides&#x2F;0.13-to-0.14.md">
            <i class="icon icon--pencil"></i>
            Improve this page
          </a>
        </div>
      </div>
    </div>
  </div>

    </div>
  </div>

        </div>
      </main>
      <footer class="print:hidden">
        
        <div class="footer__social-container">
          <a class="footer__social" href="https://github.com/bevyengine/bevy">
            <img src="/assets/github-mark-white.svg"
                  alt="Bevy engine's GitHub repo"
                  width="32"
                  height="32" />
          </a>
          <a class="footer__social" href="https://discord.gg/bevy">
            <img src="/assets/discord.svg"
                  alt="Bevy Discord server"
                  width="32"
                  height="32" />
          </a>
          <a class="footer__social" href="https://mastodon.social/@bevy">
            <img src="/assets/mastodon-logo-purple.svg"
                  alt="Bevy Mastodon account"
                  width="32"
                  height="32" />
          </a>
          <a class="footer__social" href="https://twitter.com/BevyEngine">
            <img src="/assets/twitter.svg"
                  alt="Bevy Twitter account"
                  width="32"
                  height="32" />
          </a>
          <a class="footer__social" href="https://www.reddit.com/r/bevy/">
            <img src="/assets/reddit.svg"
                  alt="Bevy subreddit"
                  width="32"
                  height="32" />
          </a>
          <a class="footer__social" href="/atom.xml">
            <img src="/assets/feed.svg"
                  alt="Bevy news feed"
                  width="32"
                  height="32" />
          </a>
        </div>
      </footer>
    </div>
    <script>
    const search_params = new URLSearchParams(window.location.search);
    if (search_params.has("show_drafts") || document.cookie.indexOf("show_drafts") >= 0) {
      if (search_params.get("show_drafts") === "0") {
        document.cookie = "show_drafts=;path=/;expires=Thu, 01 Jan 1970 00:00:00 UTC";
      } else {
        document.cookie = "show_drafts=1;path=/"
        document.body.classList.add('show_drafts');
      }
    }
    </script>
  </body>
</html>
